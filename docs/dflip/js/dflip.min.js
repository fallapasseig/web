"use strict";var DFLIP=DFLIP||{},PRESENTATION=DFLIP;!function(e,t){e.version="1.7.3.5",e.PAGE_MODE={SINGLE:1,DOUBLE:2,AUTO:null},e.SINGLE_PAGE_MODE={ZOOM:1,BOOKLET:2,AUTO:null},e.CONTROLSPOSITION={HIDDEN:"hide",TOP:"top",BOTTOM:"bottom"},e.DIRECTION={LTR:1,RTL:2},e.LINK_TARGET={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},e.CORNERS={TL:"tl",TR:"tr",BL:"bl",BR:"br",L:"l",R:"r",NONE:null},e.SOURCE_TYPE={IMAGE:"image",PDF:"pdf",HTML:"html"},e.DISPLAY_TYPE={WEBGL:"3D",HTML:"2D"},e.PAGE_SIZE={AUTO:0,SINGLE:1,DOUBLEINTERNAL:2};var n=e.defaults={webgl:!0,webglShadow:!0,soundEnable:!0,search:!1,height:"auto",autoEnableOutline:!1,autoEnableThumbnail:!1,overwritePDFOutline:!1,enableDownload:!1,duration:800,direction:e.DIRECTION.LTR,pageMode:e.PAGE_MODE.SINGLE,singlePageMode:e.SINGLE_PAGE_MODE.AUTO,backgroundColor:"#fff",forceFit:!0,transparent:!1,hard:"none",openPage:1,annotationClass:"",autoPlay:!1,autoPlayDuration:5e3,autoPlayStart:!1,maxTextureSize:1600,minTextureSize:256,rangeChunkSize:524288,icons:{altnext:"ti-angle-right",altprev:"ti-angle-left",next:"ti-angle-right",prev:"ti-angle-left",end:"ti-angle-double-right",start:"ti-angle-double-left",share:"ti-sharethis",help:"ti-help-alt",more:"ti-more-alt",download:"ti-download",zoomin:"ti-zoom-in",zoomout:"ti-zoom-out",fullscreen:"ti-fullscreen",fitscreen:"ti-arrows-corner",thumbnail:"ti-layout-grid2",outline:"ti-menu-alt",close:"ti-close",search:"ti-search",doublepage:"ti-book",singlepage:"ti-file",sound:"ti-volume",facebook:"ti-facebook",google:"ti-google",twitter:"ti-twitter-alt",mail:"ti-email",play:"ti-control-play",pause:"ti-control-pause"},text:{toggleSound:"Turn on/off Sound",toggleThumbnails:"Toggle Thumbnails",toggleOutline:"Toggle Outline/Bookmark",previousPage:"Previous Page",nextPage:"Next Page",toggleFullscreen:"Toggle Fullscreen",zoomIn:"Zoom In",zoomOut:"Zoom Out",toggleHelp:"Toggle Help",singlePageMode:"Single Page Mode",doublePageMode:"Double Page Mode",downloadPDFFile:"Download PDF File",gotoFirstPage:"Goto First Page",gotoLastPage:"Goto Last Page",play:"Start AutoPlay",pause:"Pause AutoPlay",share:"Share",mailSubject:"I wanted you to see this FlipBook",mailBody:"Check out this site {{url}}",loading:"Loading"},allControls:"altPrev,pageNumber,altNext,play,outline,thumbnail,zoomIn,zoomOut,fullScreen,share,download,search,more,pageMode,startPage,endPage,sound",moreControls:"download,pageMode,startPage,endPage,sound",hideControls:"",controlsPosition:e.CONTROLSPOSITION.BOTTOM,paddingTop:30,paddingLeft:20,paddingRight:20,paddingBottom:30,enableAnalytics:!1,scrollWheel:!0,onCreate:function(e){},onCreateUI:function(e){},onFlip:function(e){},beforeFlip:function(e){},onReady:function(e){},zoomRatio:1.5,pageSize:e.PAGE_SIZE.AUTO,pdfjsSrc:"js/libs/pdf.min.js",pdfjsCompatibilitySrc:"js/libs/compatibility.js",pdfjsWorkerSrc:"js/libs/pdf.worker.min.js",threejsSrc:"js/libs/three.min.js",mockupjsSrc:"js/libs/mockup.min.js",soundFile:"sound/turn2.mp3",imagesLocation:"images",imageResourcesPath:"images/pdfjs/",cMapUrl:"cmaps/",enableDebugLog:!1,canvasToBlob:!1,enableAnnotation:!0,pdfRenderQuality:.9,textureLoadFallback:"blank",stiffness:3,backgroundImage:"",pageRatio:null,pixelRatio:window.devicePixelRatio||1,thumbElement:"div",spotLightIntensity:.22,ambientLightColor:"#fff",ambientLightIntensity:.8,shadowOpacity:.15,linkTarget:e.LINK_TARGET.BLANK,sharePrefix:"flipbook-"},i="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,o="onmousedown"in window,a=(window,navigator.userAgent),s=e.utils={drag:{left:0,right:1,none:-1},mouseEvents:o?{type:"mouse",start:"mousedown",move:"mousemove",end:"mouseup"}:{type:"touch",start:"touchstart",move:"touchmove",end:"touchend"},html:{div:"<div/>",img:"<img/>",a:"<a>",input:"<input type='text'/>"},getSharePrefix:function(){return s.getSharePrefixes()[0]},getSharePrefixes:function(){return(e.defaults.sharePrefix+",dflip-,flipbook-,dearflip-").split(",").filter((function(e){return e}))},toRad:function(e){return e*Math.PI/180},isset:function(e,t){return null==e?t:e},isnull:function(e){return null==e||null==e},toDeg:function(e){return 180*e/Math.PI},transition:function(e,t){return e?t/1e3+"s ease-out":"0s none"},hasCompatibility:function(){var e=!1;return null!=window.dFlipLocation&&window.dFlipLocation.indexOf("lip-lit")>0&&(e=!0),e},scrollIntoView:function(e,t,n){(t=t||e.parentNode).scrollTop=e.offsetTop-t.offsetTop+(!1===n?e.offsetHeight-t.offsetHeight:0),t.scrollLeft=e.offsetLeft-t.offsetLeft},display:function(e){return e?"block":"none"},resetTranslate:function(){return g(0,0)},translateStr:function(e,t){return i?" translate3d("+e+"px,"+t+"px, 0px) ":" translate("+e+"px, "+t+"px) "},httpsCorrection:function(e){var t=window.location;return t.href.indexOf("https://")>-1&&e.indexOf(t.hostname)>-1&&(e=e.replace("http://","https://")),t.href.indexOf("http://")>-1&&e.indexOf(t.hostname)>-1&&(e=e.replace("https://","http://")),e},resetBoxShadow:function(){return"rgba(0, 0, 0, 0) 0px 0px 20px"},rotateStr:function(e){return" rotateZ("+e+"deg) "},bg:function(e){return"#fff"+m(e)},bgImage:function(e){return null==e||"blank"==e?"":" url("+e+")"},src:function(e){return null!=e?""+e:""},limitAt:function(e,t,n){return e<t?t:e>n?n:e},distOrigin:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},distPoints:function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},calculateScale:function(e,t){var n=w(e[0].x,e[0].y,e[1].x,e[1].y);return w(t[0].x,t[0].y,t[1].x,t[1].y)/n},getVectorAvg:function(e){return{x:e.map((function(e){return e.x})).reduce(s.sum)/e.length,y:e.map((function(e){return e.y})).reduce(s.sum)/e.length}},sum:function(e,t){return e+t},getTouches:function(e,t){return t=t||{left:0,top:0},Array.prototype.slice.call(e.touches).map((function(e){return{x:e.pageX-t.left,y:e.pageY-t.top}}))},angleByDistance:function(e,t){var n=t/2,i=v(e,0,t);return i<n?p(Math.asin(i/n)):90+p(Math.asin((i-n)/n))},log:function(e){1==n.enableDebugLog&&window.console&&console.log(e)},lowerPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},nearestPowerOfTwo:function(e,t){return Math.min(t||2048,Math.pow(2,Math.ceil(Math.log(e)/Math.LN2)))},zoomStops:function(e,t,n,i,o){null==i&&(i=256),null==o&&(o=2048);var a=Math.log(e/i)/Math.log(t);return i*Math.pow(t,null==n?Math.round(a):1==n?Math.ceil(a):Math.floor(a))},extendOptions:function(e,n){return t.extend(!0,{},e,n)},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},hasFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},getBasePage:function(e){return 2*Math.floor(e/2)},loadResources:function(e,t,n){var i=document,o=i.createElement(e),a=i.getElementsByTagName(e)[0];o.async=!0,n&&o.addEventListener("load",(function(e){n(null,e)}),!1),o.src=t,a.parentNode.insertBefore(o,a)},getScriptCallbacks:[],getScript:function(e,n,i){var o,a=s.getScriptCallbacks[e];function r(e,t){if(null!=o&&(t||!o.readyState||/loaded|complete/.test(o.readyState))&&(o.onload=o.onreadystatechange=null,o=null,o=null,!t)){for(var n=0;n<a.length;n++)a[n]&&a[n](),a[n]=null;i=null}}if(0===t("script[src='"+e+"']").length){(a=s.getScriptCallbacks[e]=[]).push(n),o=document.createElement("script");var l=document.body.getElementsByTagName("script")[0];o.async=1,o.setAttribute("data-cfasync",!1),null!=l?(l.parentNode.insertBefore(o,l),l=null):document.body.appendChild(o),o.addEventListener("load",r,!1),o.addEventListener("readystatechange",r,!1),o.addEventListener("complete",r,!1),i&&o.addEventListener("error",i,!1),o.src=e+("MS"==I.dom?"?"+Math.random(1):"")}else a.push(n)},isHardPage:function(e,t,n,i){if(null!=e){if("cover"==e)return 0==t||i&&1==t||t==Math.ceil(n/(i?1:2))-(i?0:1);if("all"==e)return!0;var o=(","+e+",").indexOf(","+(2*t+1)+",")>-1,a=(","+e+",").indexOf(","+(2*t+2)+",")>-1;return o||a}return!1},fixMouseEvent:function(e){if(e){var n=e.originalEvent||e;if(n.changedTouches&&n.changedTouches.length>0){var i=t.event.fix(e),o=n.changedTouches[0];return i.clientX=o.clientX,i.clientY=o.clientY,i.pageX=o.pageX,i.touches=n.touches,i.pageY=o.pageY,i.movementX=o.movementX,i.movementY=o.movementY,i}return e}return e},hasWebgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),isBookletMode:function(t){return t.pageMode==e.PAGE_MODE.SINGLE&&t.singlePageMode==e.SINGLE_PAGE_MODE.BOOKLET},isRTLMode:function(t){return t.direction==e.DIRECTION.RTL},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(a||navigator.vendor||window.opera),e}(),isIOS:/(iPad|iPhone|iPod)/g.test(a),isSafari:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),prefix:function(){var e=window.getComputedStyle(document.documentElement,""),t=Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)[1];return{dom:"WebKit|Moz|MS".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),__extends:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super=t.prototype,e}},r=e.SOURCE_TYPE,l=(e.DISPLAY_TYPE,s.drag),c=s.mouseEvents,d=s.html,u=s.isset,h=(s.isnull,s.toRad),p=s.toDeg,g=(s.transition,s.translateStr),f=(s.resetBoxShadow,s.rotateStr),m=(s.bg,s.bgImage),v=(s.src,s.limitAt),b=s.distOrigin,w=s.distPoints,x=s.angleByDistance,P=s.log,y=s.nearestPowerOfTwo,C=s.extendOptions,L=s.getBasePage,S=s.getScript,E=s.fixMouseEvent,I=s.prefix,T=s.isBookletMode,k=s.isRTLMode,O=s.isMobile,R=s.hasWebgl,F=s.isSafari,M=s.isIOS,D=s.__extends;!function(){if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(e){for(var t=0,n=this.length;t<n;t++)this[t]=e[t]});else{var e,t=!1;if(F&&(t=(e=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//))&&parseInt(e[1])<6),t){var n=window.CanvasRenderingContext2D.prototype,i=n.createImageData;n.createImageData=function(e,t){var n=i.call(this,e,t);return n.data.set=function(e){for(var t=0,n=this.length;t<n;t++)this[t]=e[t]},n},n=null}}}(),"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,20)}),function(){if("undefined"!=typeof Uint8Array)return void 0===Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(e,t){return new Uint8Array(this.slice(e,t))},Float32Array.prototype.subarray=function(e,t){return new Float32Array(this.slice(e,t))}),void("undefined"==typeof Float64Array&&(window.Float64Array=Float32Array));function e(e,t){return new n(this.slice(e,t))}function t(e,t){arguments.length<2&&(t=0);for(var n=0,i=e.length;n<i;++n,++t)this[t]=255&e[n]}function n(n){var i,o,a;if("number"==typeof n)for(i=[],o=0;o<n;++o)i[o]=0;else if("slice"in n)i=n.slice(0);else for(i=[],o=0,a=n.length;o<a;++o)i[o]=n[o];return i.subarray=e,i.buffer=i,i.byteLength=i.length,i.set=t,"object"==typeof n&&n.buffer&&(i.buffer=n.buffer),i}window.Uint8Array=n,window.Int8Array=n,window.Uint32Array=n,window.Int32Array=n,window.Uint16Array=n,window.Float32Array=n,window.Float64Array=n}();var N=function(n,i){var o="df-ui",a="df-ui-wrapper",r=o+"-btn",l=k(i.target),c=i.ui=t(d.div,{class:o}),u=i.options;c.dispose=function(){n.find("."+r).each((function(){t(this).off()})),y.off(),p.off(),g.off(),f.off(),m.off(),v.off(),b.off(),w.off(),C.off(),E.off(),F.off(),D.off(),z.off(),B.off(),A.off(),_.off(),j.off(),U.off(),H.off(),W.off(),N.remove(),x.remove(),g.remove(),p.remove(),m.remove(),c.shareBox&&(c.shareBox.dispose&&c.shareBox.dispose(),c.shareBox=null),document.removeEventListener("keyup",ne,!1),window.removeEventListener("click",I,!1),c.update=null,i=null};var h=function(e){return isNaN(e)?e=i.target._activePage:e<1?e=1:e>i.target.pageCount&&(e=i.target.pageCount),e},p=c.next=t(d.div,{class:r+" "+o+"-next "+u.icons.next,title:l?u.text.previousPage:u.text.nextPage,html:"<span>"+u.text.nextPage+"</span>"}).on("click",(function(){i.next()})),g=c.prev=t(d.div,{class:r+" "+o+"-prev "+u.icons.prev,title:l?u.text.nextPage:u.text.previousPage,html:"<span>"+u.text.previousPage+"</span>"}).on("click",(function(){i.prev()})),f=t(d.div,{class:r+" "+o+"-play "+u.icons.play,title:u.text.play,html:"<span>"+u.text.play+"</span>"}).on("click",(function(){var e=t(this);i.setAutoPlay(!e.hasClass(u.icons.pause))}));1==u.autoPlay&&(c.play=f,i.setAutoPlay(u.autoPlayStart));var m=t(d.div,{class:a+" "+o+"-zoom"}),v=c.zoomIn=t(d.div,{class:r+" "+o+"-zoomin "+u.icons.zoomin,title:u.text.zoomIn,html:"<span>"+u.text.zoomIn+"</span>"}).on("click",(function(){i.zoom(1),c.update(),i.target.startPoint&&i.target.pan&&i.target.pan(i.target.startPoint)})),b=c.zoomOut=t(d.div,{class:r+" "+o+"-zoomout "+u.icons.zoomout,title:u.text.zoomOut,html:"<span>"+u.text.zoomOut+"</span>"}).on("click",(function(){i.zoom(-1),c.update(),i.target.startPoint&&i.target.pan&&i.target.pan(i.target.startPoint)}));m.append(v).append(b);var w=c.pageNumber=t(d.div,{class:r+" "+o+"-page"}).on("change",(function(){var e=parseInt(c.pageInput.val(),10);e=h(e),i.gotoPage(e)})).on("keyup",(function(e){if(13==e.keyCode){var t=parseInt(c.pageInput.val(),10);(t=h(t))!==h(i.target._activePage||i._activePage)&&i.gotoPage(t)}}));c.pageInput=t('<input id="df_book_page_number" type="text"/>').appendTo(w),c.pageLabel=t('<label for="df_book_page_number"/>').appendTo(w);var x=t(d.div,{class:a+" "+o+"-size"}),y=t(d.div,{class:r+" "+o+"-help "+u.icons.help,title:u.text.toggleHelp,html:"<span>"+u.text.toggleHelp+"</span>"}).on("click",(function(){})),C=c.sound=t(d.div,{class:r+" "+o+"-sound "+u.icons.sound,title:u.text.toggleSound,html:"<span>"+u.text.toggleSound+"</span>"}).on("click",(function(){u.soundEnable=!u.soundEnable,c.updateSound()}));if(c.updateSound=function(){0==u.soundEnable||"false"==u.soundEnable?C.addClass("disabled"):C.removeClass("disabled")},c.updateSound(),"string"==typeof u.source&&1==u.search){var L=c.search=t(d.div,{class:r+" "+o+"-search "+u.icons.search}).on("click",(function(e){L.hasClass("df-active")||(t(this).addClass("df-active"),e.stopPropagation())}));window.addEventListener("click",(function(e){c.search.removeClass("df-active")}),!1);var S=t(d.div,{class:"search-container"});L.append(S)}var E=c.more=t(d.div,{class:r+" "+o+"-more "+u.icons.more}).on("click",(function(e){E.hasClass("df-active")||(t(this).addClass("df-active"),e.stopPropagation())}));function I(e){E.removeClass("df-active")}window.addEventListener("click",I,!1);var T=t(d.div,{class:"more-container"});if(E.append(T),"string"==typeof u.source&&1==u.enableDownload){var R=r+" "+o+"-download "+u.icons.download;(c.download=t('<a download target="_blank" class="'+R+'"><span>'+u.text.downloadPDFFile+"</span></a>")).attr("href",u.source).attr("title",u.text.downloadPDFFile)}s.hasFullscreenEnabled()||n.addClass("df-custom-fullscreen"),c.switchFullscreen=function(){s.getFullscreenElement();var e=i.container[0];1!=c.isFullscreen?(i.container.addClass("df-fullscreen"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),c.isFullscreen=!0):(i.container.removeClass("df-fullscreen"),c.isFullscreen=!1,document.exitFullscreen?document.fullscreenElement&&document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.fullscreenElement&&document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),s.hasFullscreenEnabled()||setTimeout((function(){i.resize()}),50)};var F=c.fullScreen=t(d.div,{class:r+" "+o+"-fullscreen "+u.icons.fullscreen,title:u.text.toggleFullscreen,html:"<span>"+u.text.toggleFullscreen+"</span>"}).on("click",c.switchFullscreen),D=c.fit=t(d.div,{class:r+" "+o+"-fit "+u.icons.fitscreen}).on("click",(function(){t(this).toggleClass("df-button-fit-active")}));x.append(F);var N=t(d.div,{class:a+" "+o+"-controls"}),z=(c.shareBox=new e.Share(n,u),c.share=t(d.div,{class:r+" "+o+"-share "+u.icons.share,title:u.text.share,html:"<span>"+u.text.share+"</span>"}).on("click",(function(e){1==c.shareBox.isOpen?c.shareBox.close():(c.shareBox.update(i.getURLHash()),c.shareBox.show())}))),B=c.startPage=t(d.div,{class:r+" "+o+"-start "+(l?u.icons.end:u.icons.start),title:u.text.gotoFirstPage,html:"<span>"+u.text.gotoFirstPage+"</span>"}).on("click",(function(){i.start()})),A=c.endPage=t(d.div,{class:r+" "+o+"-end "+(l?u.icons.start:u.icons.end),title:u.text.gotoLastPage,html:"<span>"+u.text.gotoLastPage+"</span>"}).on("click",(function(){i.end()})),_=c.pageMode=t(d.div,{class:r+" "+o+"-pagemode "+u.icons.singlepage,html:"<span>"+u.text.singlePageMode+"</span>"}).on("click",(function(){var e=t(this);i.setPageMode(!e.hasClass(u.icons.doublepage))}));i.setPageMode(i.target.pageMode==e.PAGE_MODE.SINGLE);var j=c.altPrev=t(d.div,{class:r+" "+o+"-prev "+o+"-alt "+u.icons.prev,title:l?u.text.nextPage:u.text.previousPage,html:"<span>"+u.text.previousPage+"</span>"}).on("click",(function(){i.prev()})),U=c.altNext=t(d.div,{class:r+" "+o+"-next "+o+"-alt "+u.icons.next,title:l?u.text.previousPage:u.text.nextPage,html:"<span>"+u.text.nextPage+"</span>"}).on("click",(function(){i.next()})),H=c.thumbnail=t(d.div,{class:r+" "+o+"-thumbnail "+u.icons.thumbnail,title:u.text.toggleThumbnails,html:"<span>"+u.text.toggleThumbnails+"</span>"}).on("click",(function(){var e=t(this);i.target.thumbContainer?(i.target.thumbContainer.toggleClass("df-sidemenu-visible"),e.toggleClass("df-active")):(i.contentProvider.initThumbs(),e.toggleClass("df-active"));e.hasClass("df-active")&&e.siblings(".df-active").trigger("click"),c.update(!0)})),W=c.outline=t(d.div,{class:r+" "+o+"-outline "+u.icons.outline,title:u.text.toggleOutline,html:"<span>"+u.text.toggleOutline+"</span>"}).on("click",(function(){var e=t(this);if(i.target.outlineContainer){var n=i.target.outlineContainer;e.toggleClass("df-active"),n.toggleClass("df-sidemenu-visible"),e.hasClass("df-active")&&e.siblings(".df-active").trigger("click"),c.update(!0)}})),V=u.allControls.replace(/ /g,"").split(","),G=","+u.moreControls.replace(/ /g,"")+",",q=","+u.hideControls.replace(/ /g,"")+",";M&&O&&(q+=",fullScreen,");G.split(",");for(var Z=0;Z<V.length;Z++){var Y=V[Z];if(q.indexOf(","+Y+",")<0){var K=c[Y];null!=K&&"object"==typeof K&&(G.indexOf(","+Y+",")>-1&&"more"!==Y&&"pageNumber"!==Y?T.append(K):N.append(K))}}n.append(N).append(g).append(p).append(m);var X=16,Q=17,$=18,J=39,ee=37,te=27;function ne(e){switch(e.keyCode){case te:1==c.isFullscreen?c.fullScreen.trigger("click"):window.dfLightBox&&window.dfActiveLightBoxBook&&window.dfLightBox.closeButton.trigger("click");break;case X:!1;break;case Q:!1;break;case $:!1;break;case ee:i.prev();break;case J:i.next()}}document.addEventListener("keyup",ne,!1),c.update=function(t){P("ui update");var o=i.target,a=h(o._activePage||i._activePage),s=o.pageCount||i.pageCount,r=o.direction==e.DIRECTION.RTL,l=1==a||0==a,d=a==s;c.next.show(),c.prev.show(),c.altNext.removeClass("disabled"),c.altPrev.removeClass("disabled"),(l&&!r||d&&r)&&(c.prev.hide(),c.altPrev.addClass("disabled")),(d&&!r||l&&r)&&(c.next.hide(),c.altNext.addClass("disabled")),c.pageInput.val(a),c.pageLabel.html(a+"/"+s),n.find(".df-sidemenu-visible").length>0?n.addClass("df-sidemenu-open"):n.removeClass("df-sidemenu-open"),1==t&&i.resize(),o.contentProvider.zoomScale==o.contentProvider.maxZoom?c.zoomIn.addClass("disabled"):c.zoomIn.removeClass("disabled"),1==o.contentProvider.zoomScale?c.zoomOut.addClass("disabled"):c.zoomOut.removeClass("disabled")},null!=i.target&&(i.target.ui=c),null!=u.onCreateUI&&u.onCreateUI(i)},z=null;function B(){z=function(e){function i(i){i=i||{};var o=this;e.call(this,i),o.options=i,o.canvas=t(o.renderer.domElement).addClass("df-3dcanvas"),o.container=i.container,o.container.append(o.canvas),o.type="PreviewStage",o.mouse=new THREE.Vector2,o.raycaster=new THREE.Raycaster,o.camera.position.set(0,20,600),o.camera.lookAt(new THREE.Vector3(0,0,0)),o.spotLight.position.set(-220,330,550),o.spotLight.castShadow=!O&&i.webglShadow,o.spotLight.shadow&&(o.spotLight.shadow.bias=-8e-4),o.spotLight.intensity=u(i.spotLightIntensity,n.spotLightIntensity),o.ambientLight.color=new THREE.Color(u(i.ambientLightColor,n.ambientLightColor)),o.ambientLight.intensity=u(i.ambientLightIntensity,n.ambientLightIntensity);var a=new THREE.ShadowMaterial;a.opacity=u(i.shadowOpacity,n.shadowOpacity),o.ground.material=a,o.ground.position.z=-2,o.orbitControl.maxAzimuthAngle=0,o.orbitControl.minAzimuthAngle=0,o.orbitControl.minPolarAngle=Math.PI/2,o.orbitControl.maxPolarAngle=2.2,o.orbitControl.mouseButtons.ORBIT=THREE.MOUSE.RIGHT,o.orbitControl.mouseButtons.PAN=-1,o.orbitControl.maxDistance=5e3,o.orbitControl.minDistance=50,o.orbitControl.noZoom=!0,o.selectiveRendering=!0,o.orbitControl.zoomSpeed=5,o.orbitControl.keyPanSpeed=0,o.orbitControl.center.set(0,0,0),o.orbitControl.update(),o.swipe_threshold=O?15:20;var r=o.cssRenderer=new THREE.CSS3DRenderer;t(r.domElement).css({position:"absolute",top:0,pointerEvents:"none"}).addClass("df-3dcanvas df-csscanvas"),o.container[0].appendChild(r.domElement);var l=o.cssScene=new THREE.Scene,d=document.createElement("div");d.className="df-page-content df-page-content-left";var h=document.createElement("div");h.className="df-page-content df-page-content-right";var p=l.divLeft=new THREE.CSS3DObject(d),g=l.divRight=new THREE.CSS3DObject(h);function f(){o.renderRequestPending=!0}l.add(p),l.add(g),o.resizeCallback=function(){r.setSize(o.canvas.width(),o.canvas.height())},window.addEventListener(c.move,f,!1),window.addEventListener("keyup",f,!1),o.dispose=function(){o.clearChild(),o.render(),window.removeEventListener(c.move,f,!1),1==o.options.scrollWheel&&(o.container[0].removeEventListener("mousewheel",m,!1),o.container[0].removeEventListener("DOMMouseScroll",m,!1)),window.removeEventListener("keyup",f,!1),o.renderer.domElement.removeEventListener("mousemove",v,!1),o.renderer.domElement.removeEventListener("touchmove",v,!1),o.renderer.domElement.removeEventListener("mousedown",b,!1),o.renderer.domElement.removeEventListener("touchstart",b,!1),o.renderer.domElement.removeEventListener("mouseup",w,!1),o.renderer.domElement.removeEventListener("touchend",w,!1),o.canvas.remove(),r.domElement.parentNode.removeChild(r.domElement),r=null,o.renderCallback=null,o.renderCallback=null,o.orbitControl.dispose(),o.orbitControl=null,o.renderer.dispose(),o.cancelRAF()},o.renderCallback=function(){TWEEN.getAll().length>0&&(o.renderRequestPending=!0),TWEEN.update(),r.render(l,o.camera)};var m=function(e){var t=0;if(null!=e.wheelDelta?t=e.wheelDelta:null!=e.detail&&(t=-e.detail),t){var n=o.previewObject.contentProvider.zoomScale;(t>0&&1==n||t<0&&n>1)&&e.preventDefault(),o.previewObject.zoom(t>0?1:-1)}f()},v=function(e){if(o.renderRequestPending=!0,e=E(e),o.isMouseDown&&0!=e.movementX&&0!=e.movementY&&(o.isMouseMoving=!0),null!=e.touches&&2==e.touches.length&&null!=o.startTouches){o.zoomDirty=!0;var t=s.getVectorAvg(s.getTouches(e,o.container.offset())),n=s.calculateScale(o.startTouches,s.getTouches(e));o.lastScale,o.previewObject.contentProvider.zoomScale,t.x,t.y;return o.camera.position.z=o.originalZ/n,o.lastScale=n,o.lastZoomCenter=t,void e.preventDefault()}if(1==o.isMouseDown&&1==o.previewObject.contentProvider.zoomScale){var i=e.pageX-o.lastPos;performance.now(),o.lastTime;Math.abs(i)>o.swipe_threshold&&(i<0?o.target.next():o.target.prev(),e.preventDefault(),o.isMouseDown=!1),o.lastPos=e.pageX,o.lastTime=performance.now()}},b=function(e){null!=(e=E(e)).touches&&2==e.touches.length&&null==o.startTouches&&(o.startTouches=s.getTouches(e),o.lastScale=1,o.originalZ=1*o.camera.position.z),document.activeElement.blur(),o.mouseValue=e.pageX+","+e.pageY,o.isMouseMoving=!1,o.isMouseDown=!0,o.lastPos=e.pageX,o.lastTime=performance.now()},w=function(e){if(null!=(e=E(e)).touches&&0==e.touches.length){o.previewObject.contentProvider.zoomScale;1==o.zoomDirty&&(o.previewObject.contentProvider.zoomScale=s.limitAt(o.previewObject.contentProvider.zoomScale*o.lastScale,1,o.previewObject.contentProvider.maxZoom),o.previewObject.zoomValue=1*o.previewObject.contentProvider.zoomScale,o.previewObject.resize(),o.zoomDirty=!1),o.lastScale=null,o.startTouches=null}null!=e.touches&&e.touches.length>1||function(e){if(o.isMouseDown=!1,0!==e.button)return this;var n=e.pageX+","+e.pageY;if(o.isMouseMoving);else if(n==o.mouseValue){e=e||window.event,e=t.event.fix(e);var i=o.mouse,a=o.raycaster;i.x=e.offsetX/o.canvas.innerWidth()*2-1,i.y=1-e.offsetY/o.canvas.innerHeight()*2,a.setFromCamera(i,o.camera);var s=a.intersectObjects(o.target instanceof MOCKUP.Bundle?o.target.children:[o.target],!0);if(s.length>0){var r,l=0;do{r=null!=s[l]?s[l].object:null,l++}while((r instanceof THREE.BoxHelper||!(r instanceof MOCKUP.Paper)||1==r.isFlipping)&&l<s.length);null!=r.userData.object||(r.angles[1]>90?1!=r.isEdge&&o.target.next():1!=r.isEdge&&o.target.prev())}}}(e)};return o.renderer.domElement.addEventListener("mousemove",v,!1),o.renderer.domElement.addEventListener("touchmove",v,!1),o.renderer.domElement.addEventListener("mousedown",b,!1),o.renderer.domElement.addEventListener("touchstart",b,!1),o.renderer.domElement.addEventListener("mouseup",w,!1),o.renderer.domElement.addEventListener("touchend",w,!1),1==o.options.scrollWheel&&(o.container[0].addEventListener("mousewheel",m,!1),o.container[0].addEventListener("DOMMouseScroll",m,!1)),t(o.renderer.domElement).css({display:"block"}),t(window).trigger("resize"),this}return D(i,e),i.prototype.width=function(){return this.container.width()},i.prototype.height=function(){return this.container.height()},i}(MOCKUP.Stage),MOCKUP.PreviewStage=z;var i=function(t){function n(e,n){(e=e||{}).folds=1,t.call(this,e,n),this.angle=0,this.isFlipping=!1,this.material.materials[5].transparent=!0,this.material.materials[4].transparent=!0,this.type="BookPaper"}return D(n,t),n.prototype.tween=function(t,n){var i=this,o=1e-5;i.originalStiff=i.stiffness;var a=i.newStiffness,s=T(i.parent),r=n-t,l=t>90,c=i.parent.direction==e.DIRECTION.RTL;i.init={angle:t,angle2:t<90?0:180,stiff:i.originalStiff,index:l&&!c||!l&&c?1:0},i.first={angle:t+r/4,angle2:90,stiff:i.originalStiff,index:l&&!c||!l&&c?1:.25},i.mid={angle:t+2*r/4,angle2:t<90?135:45,stiff:i.newStiffness,index:.5},i.mid2={angle:t+3*r/4,angle2:t<90?180:0,stiff:i.newStiffness,index:l&&!c||!l&&c?.25:1},i.end={angle:n,angle2:t<90?180:0,stiff:i.newStiffness,index:l&&!c||!l&&c?0:1},i.isFlipping=!0;s&&(!l&&!c||l&&c)&&(i.material.materials[5].opacity=i.material.materials[4].opacity=0,i.castShadow=!1),i.currentTween=new TWEEN.Tween(i.init).to({angle:[i.first.angle,i.mid.angle,i.mid2.angle,i.end.angle],angle2:[i.first.angle2,i.mid.angle2,i.mid2.angle2,i.end.angle2],stiff:[i.first.stiff,i.mid.stiff,i.mid2.stiff,i.end.stiff],index:[i.first.index,i.mid.index,i.mid2.index,i.end.index]},i.parent.duration).onUpdate((function(e){!function(e,t){i.angles[1]=e.angle,i.angles[4]=i.isHard?e.angle:e.angle2,1==i.isHard?i.stiffness=0:(i.stiffness=e.stiff/(a+o)*(i.newStiffness+o),i.stiffness=isNaN(i.stiffness)?0:e.stiff),s&&(i.material.materials[5].opacity=i.material.materials[4].opacity=e.index,i.castShadow=e.index>.5),i.updateAngle(!0)}(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete((function(e){i.stiffness=i.newStiffness,i.updateAngle(),i.material.materials[5].opacity=i.material.materials[4].opacity=1,i.castShadow=!0,i.isFlipping=!1,i.parent&&i.parent.refresh&&i.parent.refresh()})).start()},n}(MOCKUP.FlexBoxPaper);MOCKUP.BookPaper=i;var o=function(t){function i(n,i){(n=n||{}).segments=n.segments||50,this.pageCount=n.pageCount,this.height=n.height,this.width=n.width,this.direction=n.direction||e.DIRECTION.LTR,this.startPage=1,this.endPage=this.pageCount,this.stackCount=n.stackCount||6,this.materials=[],t.call(this,n,i),this.angles=[0,0,0,0,0,0],this.stiffness=null==n.stiffness?1.5:n.stiffness,this.hardConfig=n.hard,this._activePage=n.openPage||this.startPage,this.createStack(n),this.pageMode=n.pageMode||(O||this.pageCount<=2?e.PAGE_MODE.SINGLE:e.PAGE_MODE.DOUBLE),this.singlePageMode=n.singlePageMode||(O?e.SINGLE_PAGE_MODE.BOOKLET:e.SINGLE_PAGE_MODE.ZOOM),this.type="Book"}return D(i,t),i.prototype.getPageByNumber=function(e){var t=T(this)?k(this)?e+1:e:Math.floor((e-1)/2);return this.getObjectByName(t.toString())},i.prototype.isPageHard=function(e){return s.isHardPage(this.hardConfig,e,this.pageCount)},i.prototype.activePage=function(e){if(null==e)return this._activePage;this.gotoPage(e)},i.prototype.gotoPage=function(e){e=parseInt(e,10),this._activePage=e,1==this.autoPlay&&this.previewObject.setAutoPlay(this.autoPlay),this.updatePage(e),this&&this.thumblist&&this.thumblist.review&&this.thumblist.review()},i.prototype.moveBy=function(e){var t=this._activePage+e;t=v(t,this.startPage,this.endPage),1!=this.firstFlipped&&(this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options}),this.firstFlipped=!0),this.gotoPage(t)},i.prototype.next=function(t){null==t&&(t=this.direction==e.DIRECTION.RTL?-this.pageMode:this.pageMode),this.moveBy(t)},i.prototype.prev=function(t){null==t&&(t=this.direction==e.DIRECTION.RTL?this.pageMode:-this.pageMode),this.moveBy(t)},i.prototype.updateAngle=function(){for(var e=this.angles[1],t=this.angles[4]-e,n=this.stackCount,i=0;i<n;i++){var o=this.children[i];o.angles[1]=e+i*t/(100*n),o.stiffness=this.stiffness,o.updateAngle()}},i.prototype.refresh=function(){this.updatePage(this._activePage),null!=this.flipCallback&&this.flipCallback()},i.prototype.updatePage=function(t){var i=this.direction==e.DIRECTION.RTL,o=T(this),a=(L(t),o?1:2);t=Math.floor(t/a),i&&(t=Math.ceil(this.pageCount/a)-t);var s=this.oldBaseNumber||0,r=this.pageCount/a,l=this.stackCount,c=.02,d=.4,u=o?0:(.5-Math.abs(r/2-t)/r)/this.stiffness,h=Math.floor(l/2),p=!1;s>t?(p=!0,this.children[l-1].skipFlip=!0,this.children.unshift(this.children.pop())):s<t&&(this.children[0].skipFlip=!0,this.children.push(this.children.shift()));for(var g=5/r,f=g*t/2,m=g*(r-t)/2,v=f<m?m:f,b=0;b<l;b++){var w,x=this.children[b],P=(x.color,x.angles[1]),y=t-h+b;i&&(y=o?this.pageCount-y:Math.ceil(this.pageCount/2)-y-1);var C=x.isHard=this.isPageHard(y),S=x.name;x.isEdge=!1,0==b?x.depth=f<d?d:f:b==l-1?x.depth=m<d?d:m:(x.depth=d,x.isEdge=!1),1==x.isFlipping&&(x.depth=d),x.position.x=0;var E=c*b,I=180-c*(b-h)+c*b;if(b<h?(x.newStiffness=C||0==this.stiffness?0:u/(t/r)/4,w=E,x.position.z=v-(-b+h)*d,1==p&&(x.position.z-=d)):(w=I,x.newStiffness=C||0==this.stiffness?0:u/(Math.abs(r-t)/r)/4,x.position.z=v-(-l+b+h+1)*d-x.depth),0==x.isFlipping)if(Math.abs(P-w)>20&&0==x.skipFlip){x.depth=d;var k=x.stiffness;k=P>w?u/(Math.abs(r-t)/r)/4:u/(t/r)/4,x.position.z+=d,x.stiffness=isNaN(k)?x.stiffness:k,x.updateAngle(!0),x.targetStiffness=C?0:b<t?u/(Math.abs(r-t)/r)/4:u/(t/r)/4,x.targetStiffness=C?0:isNaN(x.targetStiffness)?x.stiffness:x.targetStiffness,x.isFlipping=!0,x.tween(P,w),null!=this.preFlipCallback&&this.preFlipCallback()}else x.skipFlip=!1,x.newStiffness=isNaN(x.newStiffness)?0:x.newStiffness,x.angles[1]==w&&x.stiffness==x.newStiffness&&x.depth==x.oldDepth||(x.angles[1]=x.angles[4]=w,x.stiffness=x.newStiffness,x.updateAngle(!0));x.visible=o?i?b<h||x.isFlipping:b>=h||x.isFlipping:y>=0&&y<r||o&&y==r,null!=this.requestPage&&(x.name=y.toString(),x.name!=S&&(x.textureLoaded=!1,x.frontImage(n.textureLoadFallback),x.frontPageStamp="-1",x.frontTextureLoaded=!1,x.thumbLoaded=!1,x.backImage(n.textureLoadFallback),x.backPageStamp="-1",x.backTextureLoaded=!1,this.requestPage())),x.oldDepth=x.depth;var O=Math.abs(x.geometry.boundingBox.max.x)<Math.abs(x.geometry.boundingBox.min.x)?x.geometry.boundingBox.max.x:x.geometry.boundingBox.min.x;x.position.x=1==x.isEdge&&0==x.isFlipping?b<h?O:-O:0}this.oldBaseNumber=t,null!=this.updatePageCallback&&this.updatePageCallback()},i.prototype.createCover=function(e){e.width=2*e.width,this.cover=new MOCKUP.BiFold(e),this.add(this.cover)},i.prototype.createStack=function(e){for(var t="red,green,blue,yellow,orange,black".split(","),n=0;n<this.stackCount;n++){e.angles=[,this.stackCount-n],e.stiffness=(this.stackCount-n)/100;var i=new MOCKUP.BookPaper(e);i.angles[1]=180,i.index=n,i.updateAngle(),i.textureReady=!1,i.textureRequested=!1,this.add(i),i.color=t[n],i.position.z=-1*n}},i.prototype.shininess=function(e){if(null==e)return this.mainObject.shininess();this.mainObject.shininess(e)},i.prototype.bumpScale=function(e){if(null==e)return this.mainObject.bumpScale();this.mainObject.bumpScale(e)},i.prototype.frontImage=function(e){if(null==e)return this.mainObject.frontImage();this.mainObject.frontImage(e)},i.prototype.backImage=function(e){if(null==e)return this.mainObject.backImage();this.mainObject.backImage(e)},i}(MOCKUP.Bundle);MOCKUP.Book=o}var A=function(n){function i(t){t=t||{},this.type="PreviewObject";var n=this;function i(){setTimeout((function(){n.resize()}),50)}n.zoomValue=1,window.addEventListener("resize",i,!1),this.sound=document.createElement("audio"),this.sound.setAttribute("src",t.soundFile+"?ver="+e.version),this.sound.setAttribute("type","audio/mpeg"),this.autoPlayFunction=function(){n&&n.target.autoPlay&&(n.target.direction==e.DIRECTION.RTL?n.target.prev():n.target.next())},this.dispose=function(){if(clearInterval(this.autoPlayTimer),this.autoPlayTimer=null,this.autoPlayFunction=null,this.target&&this.target.children)for(var e=0;e<this.target.children.length;e++){var t=this.target.children[e];t&&t.currentTween&&t.currentTween.stop()}this.zoomTween&&(this.zoomTween.stop&&this.zoomTween.stop(),this.zoomTween=null),this.container&&this.container.info&&this.container.info.remove&&this.container.info.remove(),this.target&&this.target.dispose&&this.target.dispose(),this.target=null,this.stage&&this.stage.dispose&&this.stage.dispose(),this.stage=null,this.ui&&this.ui.dispose&&this.ui.dispose(),this.ui=null,this.contentProvider&&this.contentProvider.dispose&&this.contentProvider.dispose(),this.contentProvider=null,window.removeEventListener("resize",i)}}return i.prototype={start:function(){this.target.gotoPage(this.target.startPage)},end:function(){this.target.gotoPage(this.target.endPage)},next:function(){},prev:function(){},getPageTextContent:function(e){return this.contentProvider.pdfDocument.getPage(e+1).then((function(e){return e.getTextContent({normalizeWhitespace:!0})}))},calculateSize:function(e,t,n,i,o,a,s,r){var l=e,c=t-o,d=l-i,u=Math.ceil(r?c:c/2),h=u/s,p=null;a?l=p=Math.min(h,n-i):p=Math.min(d,n-i);var g,f,m=h>p;return m?(f=p,g=Math.floor(f*s)):(g=u,f=Math.ceil(u/s)),a&&(l=Math.max(f+i,320)),{stageHeight:l,isWide:m,height:f,width:g}},zoom:function(e){this.pendingZoom=!0,this.zoomDelta=e,this.resize(),this.ui&&this.ui.update()},resize:function(){var n=this;if(null!=n.target&&null!=n.target.ui&&null!=n.target.contentProvider&&null!=n.target.contentProvider.viewport&&null!=n.target.stage){this.ui&&1==this.ui.isFullscreen&&1==s.hasFullscreenEnabled()&&null==s.getFullscreenElement()&&this.ui.switchFullscreen();var i,o,a,l,c,d,u=n.target,h=n.container,p=n.options,g=u.stage,f=u.contentProvider,m=f.pageRatio,w=(f.zoomViewport,k(u)),x="css"!==u.mode,P=(f.pageRatio,1!=this.ui.isFullscreen&&"auto"===p.height),y=h.hasClass("df-sidemenu-open")?220:0,C=this.target.pageMode==e.PAGE_MODE.SINGLE,L=h.width();L<400?n.container.addClass("df-xs"):n.container.removeClass("df-xs");var S=h.find(".df-ui-controls").height(),E=p.paddingTop+(p.controlsPosition==e.CONTROLSPOSITION.TOP?S:0),I=p.paddingRight,T=p.paddingBottom+(p.controlsPosition==e.CONTROLSPOSITION.BOTTOM?S:0),O=p.paddingLeft,R=(E=isNaN(E)?0:v(E,0,E))+(T=isNaN(T)?0:v(T,0,T)),F=(O=isNaN(O)?0:v(O,0,O))+(I=isNaN(I)?0:v(I,0,I)),M=L-y;h.height(p.height);var D=t(window).height(),N=Math.min(h.height(),D),z=n.calculateSize(N,M,D,R,F,P,m,C);N=B=P?n.calculateSize(N,M+y,D,R,F,P,m,C).stageHeight:z.stageHeight,h.height(N);var B=N,A=M-F,_=B-R;if(a=Math.floor(C?A:A/2),(i=(o=Math.floor(a/m))>_)&&(a=(o=_)*m),d=f.maxZoom=f.zoomViewport.height/o,null==n.zoomValue&&(n.zoomValue=1),null==f.zoomScale&&(f.zoomScale=1),1==n.pendingZoom&&null!=n.zoomDelta){n.zoomDelta,Math.max(o,a);n.zoomValue=n.zoomDelta>0?n.zoomValue*n.options.zoomRatio:n.zoomValue/n.options.zoomRatio,n.zoomValue=v(n.zoomValue,1,d),1==n.zoomValue?f.zoomScale=1:f.zoomScale=v(n.zoomValue,1,d)}c=f.zoomScale,f.checkViewportSize(a,o,c),f.contentSourceType==r.PDF&&(a=f.imageViewport.width/c,o=f.imageViewport.height/c),1!=f.zoomScale&&this.target.container.addClass("df-zoom-enabled");var j=u.zoomWidth=Math.floor(a*c),U=u.zoomHeight=Math.floor(o*c),H=2*j;if(x){var W=U/u.height,V=i?c*(o+R)/W:c*(a*(C?1:2)+F)/W/(M/B);g.resizeCanvas(M,B),l=1/(2*Math.tan(Math.PI*g.camera.fov*.5/180)/(V/c))+2.2,g.camera.updateProjectionMatrix(),g.renderRequestPending=!0;var G=(E-T)*(u.height/o)/c/2,q=1==f.zoomScale;g.camera.position.z!==l&&1==n.pendingZoom?(null!=n.zoomTween&&n.zoomTween.stop(),n.zoomTween=new TWEEN.Tween({campos:g.camera.position.z,otx:g.orbitControl.target.x,oty:g.orbitControl.target.y,otz:g.orbitControl.target.z}).delay(0).to({campos:l,otx:0,oty:G,otz:0},100).onUpdate((function(){g.camera.position.z=this.campos,q&&(g.camera.position.y=this.oty,g.orbitControl.target=new THREE.Vector3(this.otx,this.oty,this.otz)),g.orbitControl.update()})).easing(TWEEN.Easing.Linear.None).onComplete((function(){g.camera.position.z=l,1==f.zoomScale&&(g.camera.position.set(0,G,l),g.orbitControl.target=new THREE.Vector3(0,G,0)),g.orbitControl.update()})).start()):(1==f.zoomScale&&(g.camera.position.set(0,G,l),g.orbitControl.target=new THREE.Vector3(0,G,0)),g.orbitControl.update()),g.orbitControl.update(),g.orbitControl.mouseButtons.ORBIT=1!=c?-1:THREE.MOUSE.RIGHT,g.orbitControl.mouseButtons.PAN=1!=c?THREE.MOUSE.LEFT:-1}else{u.pageWidth=Math.round(a),u.fullWidth=2*u.pageWidth,u.height=Math.round(o);var Z=u.shiftHeight=Math.round(v((U-B+R)/2,0,U)),Y=u.shiftWidth=Math.round(v((H-M+F)/2,0,H));1==c&&(u.left=0,u.top=0),u.stage.css({top:-Z,bottom:-Z,right:-Y+(w?y:0),left:-Y+(w?0:y),paddingTop:E,paddingRight:I,paddingBottom:T,paddingLeft:O,transform:"translate3d("+u.left+"px,"+u.top+"px,0)"}),u.stageHeight=g.height(),u.wrapper.css({width:H,height:U,marginTop:N-U-R>0?(N-R-U)/2:0});var K=Math.floor(b(a,o)*c);u.stage.find(".df-page-wrapper").width(K).height(K),u.stage.find(".df-book-page, .df-page-front , .df-page-back, .df-page-fold-inner-shadow").height(U).width(j)}n.checkCenter({type:"resize"}),1==f.zoomScale&&this.target.container.removeClass("df-zoom-enabled"),u.thumblist&&u.thumblist.reset(t(u.thumblist.container).height()),n.pendingZoom=!1}},playSound:function(){try{this.options&&1==this.options.soundEnable&&(this.sound.currentTime=0,this.sound.play())}catch(e){}},setPageMode:function(t){1==t?(this.ui.pageMode.addClass(this.options.icons.doublepage),this.ui.pageMode.html("<span>"+this.options.text.doublePageMode+"</span>"),this.ui.pageMode.attr("title",this.options.text.doublePageMode),this.target.pageMode=e.PAGE_MODE.SINGLE):(this.ui.pageMode.removeClass(this.options.icons.doublepage),this.ui.pageMode.html("<span>"+this.options.text.singlePageMode+"</span>"),this.ui.pageMode.attr("title",this.options.text.singlePageMode),this.target.pageMode=e.PAGE_MODE.DOUBLE),this.target&&this.target.singlePageMode==e.SINGLE_PAGE_MODE.BOOKLET&&this.target.reset(),this.resize()},setAutoPlay:function(e){if(this.options.autoPlay){var t=(e=1==e)?this.options.text.pause:this.options.text.play;this.ui.play.toggleClass(this.options.icons.pause,e),this.ui.play.html("<span>"+t+"</span>"),this.ui.play.attr("title",t),clearInterval(this.autoPlayTimer),e&&(this.autoPlayTimer=setInterval(this.autoPlayFunction,this.options.autoPlayDuration)),this.target.autoPlay=e}},height:function(e){if(null==e)return this.container.height();this.options.height=e,this.container.height(e),this.resize()},checkCenter:function(t){t=null==t?{}:t,this.centerType=this.centerType||"start";var n,i=this.target,o=0,a=0,r=0,l=s.getBasePage(i._activePage),c=i._activePage%2==0,d=i.direction==e.DIRECTION.RTL,u=i.pageMode==e.PAGE_MODE.SINGLE,h=u&&i.singlePageMode==e.SINGLE_PAGE_MODE.BOOKLET,p=i.stage.width();if("css"==i.mode)n=i.wrapper.width(),o=Math.max((n-p)/2,0),a=-n/4,r=n/4,0==l||h?(i.wrapper.css({left:u?d?r-o:a-o:d?r:a}),i.shadow.css({width:"50%",left:d?0:"50%",transitionDelay:""})):l==i.pageCount?(i.wrapper.css({left:u?d?a-o:r-o:d?a:r}),i.shadow.css({width:"50%",left:d?"50%":0,transitionDelay:""})):(i.wrapper.css({left:u?d?c?a-o:r-o:c?r-o:a-o:0}),i.shadow.css({width:"100%",left:0,transitionDelay:parseInt(i.duration,10)+50+"ms"})),i.wrapper.css({transition:"resize"==t.type?"none":""});else if(null!=i.stage){var g,f=i.position.x;o=i.width/4,a=-(n=i.width)/2,r=n/2,(g=0==l||h?d?r:a:l==i.pageCount?d?a:r:u?d?c?a:r:c?r:a:0)!==this.centerEnd&&(this.centerTween=new TWEEN.Tween({x:f}).delay(0).to({x:g},i.duration).onUpdate((function(){i.position.x=this.x,i.stage.cssScene.position.x=this.x})).easing(i.ease).start(),this.centerEnd=g)}},width:function(e){if(null==e)return this.container.width();this.options.width=e,this.container.width(e),this.resize()}},i}();e.PreviewObject=A;var _=function(i){function o(i,o,a,l){a=a||{};var c=this;if(c.contentRawSource=i||[n.textureLoadFallback],c.contentSource=c.contentRawSource,c.contentSourceType=null,c.minDimension=a.minTextureSize||256,c.maxDimension=a.maxTextureSize||2048,c.pdfRenderQuality=a.pdfRenderQuality||e.defaults.pdfRenderQuality,c.flipbook=l,c.waitPeriod=50,c.maxLength=297,c.enableDebug=!1,c.zoomScale=1,c.maxZoom=2,c.options=a,c.outline=a.outline,c.links=a.links,c.html=a.html,c.isCrossOrigin=a.isCrossOrigin,c.normalViewport={height:297,width:210,scale:1},c.viewport={height:297,width:210,scale:1},c.imageViewport={height:297,width:210,scale:1},c.bookSize={height:297,width:210},c.zoomViewport={height:297,width:210},c.thumbsize=128,c.cacheIndex=256,c.cache=[],c.pageRatio=a.pageRatio||c.viewport.width/c.viewport.height,c.textureLoadTimeOut=null,c.type="TextureLibrary",Array===c.contentSource.constructor||Array.isArray(c.contentSource)||c.contentSource instanceof Array){c.contentSourceType=r.IMAGE,c.pageCount=c.contentSource.length;for(var d=0;d<c.contentSource.length;d++)c.contentSource[d]=s.httpsCorrection(c.contentSource[d].toString());t("<img/>").attr("src",c.contentSource[0]).on("load",(function(){c.viewport.height=this.height,c.viewport.width=this.width,c.pageRatio=c.viewport.width/c.viewport.height,c.bookSize={width:(c.pageRatio>1?1:c.pageRatio)*c.maxLength,height:c.maxLength/(c.pageRatio<1?1:c.pageRatio)},c.zoomViewport={width:(c.pageRatio>1?1:c.pageRatio)*c.maxDimension,height:c.maxDimension/(c.pageRatio<1?1:c.pageRatio)},c.linkService=new PDFLinkService,t(this).off(),c.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&(c.pageCount=2*c.contentSource.length-2,1==c.options.webgl&&(c.requiresImageTextureScaling=!0)),null!=o&&(o(c),o=null),P(this.height+":"+this.width)}))}else if("string"==typeof c.contentSource||c.contentSource instanceof String){var u=function(){c.contentSource.indexOf(".base64")>1?t.ajax({url:c.contentSource,xhrFields:{onprogress:function(e){if(e.lengthComputable){var t=100*e.loaded/e.total;c.updateInfo(c.options.text.loading+" PDF "+t.toString().split(".")[0]+"% ...")}}},success:function(e){c.options.docParameters={data:atob(e)},h()}}):h()},h=function(){if(c){pdfjsLib.GlobalWorkerOptions.workerSrc=n.pdfjsWorkerSrc,c.contentSourceType=r.PDF;var t=c.options.disableFontFace;F||M||c.options.disableFontFace;var a=c.loading=pdfjsLib.getDocument(c.options.docParameters?c.options.docParameters:{url:s.httpsCorrection(i),rangeChunkSize:isNaN(c.options.rangeChunkSize)?524288:c.options.rangeChunkSize,cMapUrl:n.cMapUrl,cMapPacked:!0,imageResourcesPath:n.imageResourcesPath,disableAutoFetch:!0,disableStream:!0,disableFontFace:t});a.promise.then((function(t){c.pdfDocument=t,t.getPage(1).then((function(n){c.normalViewport=n.getViewport({scale:1}),c.viewport=n.getViewport({scale:1}),c.viewport.height=c.viewport.height/10,c.viewport.width=c.viewport.width/10,c.pageRatio=c.viewport.width/c.viewport.height,c.bookSize={width:(c.pageRatio>1?1:c.pageRatio)*c.maxLength,height:c.maxLength/(c.pageRatio<1?1:c.pageRatio)},c.zoomViewport={width:(c.pageRatio>1?1:c.pageRatio)*c.maxDimension,height:c.maxDimension/(c.pageRatio<1?1:c.pageRatio)},c.refPage=n,t.numPages>1?t.getPage(2).then((function(n){if(c.options.pageSize==e.PAGE_SIZE.AUTO){var i=n.getViewport({scale:1});i.width/i.height>1.5*c.pageRatio?(c.options.pageSize=e.PAGE_SIZE.DOUBLEINTERNAL,c.pageCount=2*t.numPages-2):c.options.pageSize=e.PAGE_SIZE.SINGLE}null!=o&&(o(c),o=null)})):null!=o&&(o(c),o=null)})),c.linkService=new PDFLinkService,c.linkService.setDocument(t,null),c.pageCount=t.numPages,c.contentSource=t}),(function(e){if(c){var t="",n=document.createElement("a");n.href=c.contentSource,n.hostname!==window.location.hostname&&(t="CROSS ORIGIN!! "),c.updateInfo(t+"Cannot access file!  "+c.contentSource)}})),a.onProgress=function(e){if(c){var t=100*e.loaded/e.total;isNaN(t)?e&&e.loaded?c.updateInfo(c.options.text.loading+" PDF "+(Math.ceil(e.loaded/1e4)/100).toString()+"MB ..."):c.updateInfo(c.options.text.loading+" PDF ..."):c.updateInfo(c.options.text.loading+" PDF "+t.toString().split(".")[0]+"% ...")}}}},p=function(){if(c){n.pdfjsWorkerSrc.indexOf("?ver")<0&&(n.pdfjsWorkerSrc+="?ver="+e.version),c.updateInfo(c.options.text.loading+" PDF Worker ...");var i=document.createElement("a");i.href=n.pdfjsWorkerSrc,i.hostname!==window.location.hostname?(c.updateInfo(c.options.text.loading+" PDF Worker CORS ..."),t.ajax({url:n.pdfjsWorkerSrc,cache:!0,success:function(t){n.pdfjsWorkerSrc=e.createObjectURL(t,"text/javascript"),u()}})):u()}};null==window.pdfjsLib?c&&(c.updateInfo(c.options.text.loading+" PDF Service ..."),S(n.pdfjsSrc+"?ver="+e.version,(function(){"function"==typeof define&&define.amd&&window.requirejs?(c.updateInfo(c.options.text.loading+" PDF Service (require) ..."),require.config({paths:{"pdfjs-dist/build/pdf.worker":n.pdfjsWorkerSrc.replace(".js","")}}),require(["pdfjs-dist/build/pdf"],(function(e){window.pdfjsLib=e,p()}))):"object"==typeof exports&&null!=exports["pdfjs-dist/build/pdf"]?(window.pdfjsLib=exports["pdfjs-dist/build/pdf"],p()):p()}),(function(){c.updateInfo("Unable to load PDF service..")}))):u()}else console.error("Unknown source type. Please check documentation for help");return this.dispose=function(){c.loading&&c.loading.destroy&&c.loading.destroy(),c.loading=null,c.textureLoadTimeOut&&(clearTimeout(c.textureLoadTimeOut),c.textureLoadTimeOut=null),this.targetObject&&(this.targetObject.thumbContainer&&this.targetObject.thumbContainer.remove&&this.targetObject.thumbContainer.remove(),this.targetObject.outlineContainer&&this.targetObject.outlineContainer.remove&&this.targetObject.outlineContainer.remove(),this.targetObject.dispose&&this.targetObject.dispose(),this.targetObject.processPage=null,this.targetObject.requestPage=null,this.targetObject.container&&this.targetObject.container.off&&this.targetObject.container.off()),this.pdfDocument&&this.pdfDocument.destroy&&this.pdfDocument.destroy(),this.linkService&&this.linkService.dispose&&this.linkService.dispose(),this.outlineViewer&&this.outlineViewer.dispose&&this.outlineViewer.dispose(),this.thumblist&&this.thumblist.dispose&&(this.thumblist.review=null,this.thumblist.dispose()),this.activeThumb=null,this.targetObject=null,this.pdfDocument=null,this.linkService=null,this.outlineViewer=null,this.thumblist=null,c=null},this}return D(o,{}),o.prototype.updateInfo=function(e){this.flipbook&&this.flipbook.updateInfo&&this.flipbook.updateInfo(e)},o.prototype.initThumbs=function(){var e,n=this;null==n.cache[n.thumbsize]&&(n.cache[n.thumbsize]=[]);var i=function(){clearTimeout(e),e=setTimeout((function(){e=setTimeout(o,n.waitPeriod/2)}),n.waitPeriod)},o=function(){var o=0;if((Date.now()-n.thumblist.lastScrolled<100?o=1:(n.targetObject.container.find(".df-thumb-container .df-vrow").each((function(){var e=t(this);if(!e.hasClass("df-thumb-loaded")){o++;var a=t(this).attr("id").replace("df-thumb","");return n.getPage(a,i,!0),e.addClass("df-thumb-loaded"),!1}})),0==o&&clearTimeout(e)),o>0&&i(),n.activeThumb!=n.targetObject._activePage)&&(null!=n.targetObject.thumbContainer&&n.targetObject.thumbContainer.hasClass("df-sidemenu-visible"))){var a=n.thumblist.container,r=a.scrollTop,l=a.getBoundingClientRect().height,c=n.targetObject.thumbContainer.find("#df-thumb"+n.targetObject._activePage);c.length>0?(n.targetObject.thumbContainer.find(".df-selected").removeClass("df-selected"),c.addClass("df-selected"),r+l<(c=c[0]).offsetTop+c.scrollHeight?s.scrollIntoView(c,null,!1):r>c.offsetTop&&s.scrollIntoView(c),n.activeThumb=n.targetObject._activePage):(t(a).scrollTop(124*n.targetObject._activePage),i())}};n.thumblist=n.targetObject.thumblist=new ThumbList({h:500,addFn:function(e){},scrollFn:i,itemHeight:128,totalRows:n.pageCount,generatorFn:function(e){var t=document.createElement("div"),n=e+1;t.id="df-thumb"+n;var i=document.createElement("div");return i.innerHTML=n,t.appendChild(i),t}}),n.thumblist.lastScrolled=Date.now(),n.thumblist.review=i,i();var a=t("<div>").addClass("df-thumb-container df-sidemenu-visible df-sidemenu");a.append(t(n.thumblist.container).addClass("df-thumb-wrapper")),n.targetObject.thumbContainer=a,n.targetObject.container.append(a);var r=t(d.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"});a.append(r),n.thumblist.reset(t(n.thumblist.container).height()),n.targetObject.container.on("click",".df-thumb-container .df-vrow",(function(e){e.stopPropagation();var i=t(this).attr("id").replace("df-thumb","");n.targetObject.gotoPage(parseInt(i,10))}))},o.prototype.initOutline=function(){var e=this,n=t("<div>").addClass("df-outline-container df-sidemenu"),i=t("<div>").addClass("df-outline-wrapper"),o=t(d.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"});function a(t){if(1==e.options.overwritePDFOutline&&(t=[]),t=t||[],e.outline)for(var n=0;n<e.outline.length;n++)e.outline[n].custom=!0,t&&t.push(e.outline[n]);0===t.length&&null!=e.targetObject.ui.outline&&e.targetObject.ui.outline.hide(),e.outlineViewer.render({outline:t})}n.append(o).append(i),e.targetObject.container.append(n),e.targetObject.outlineContainer=n,e.outlineViewer=new BookMarkViewer({container:i[0],linkService:e.linkService,outlineItemClass:"df-outline-item",outlineToggleClass:"df-outline-toggle",outlineToggleHiddenClass:"df-outlines-hidden"}),e.pdfDocument?e.pdfDocument.getOutline().then((function(e){a(e)})):a([]),1==e.options.autoEnableOutline&&e.targetObject.ui.outline.trigger("click"),1==e.options.autoEnableThumbnail&&e.targetObject.ui.thumbnail.trigger("click")},o.prototype.checkViewportSize=function(e,t,i){var o=this,a=o.targetObject,s=e*i,l=t*i,c=o.cacheIndex;if(o.contentSourceType==r.PDF){if(o.cacheIndex=Math.ceil(Math.max(s,l)),o.cacheIndex=Math.floor(Math.max(s,l)),o.cacheIndex=v(o.cacheIndex*n.pixelRatio,o.minDimension,o.maxDimension),null==o.cache[o.cacheIndex]&&(o.cache[o.cacheIndex]=[]),c!==o.cacheIndex){for(var d=0;d<a.children.length;d++)a.children[d];a.refresh()}o.imageViewport=o.refPage.getViewport({scale:l/o.normalViewport.height}),o.viewport="css"==a.mode?o.imageViewport:o.refPage.getViewport({scale:o.bookSize.height/o.normalViewport.height}),P(o.cacheIndex),o.annotedPage=void 0,o.review()}else null==o.cache[o.cacheIndex]&&(o.cache[o.cacheIndex]=[])},o.prototype.getCache=function(e,t){return 1==t?null==this.cache[this.thumbsize]?null:this.cache[this.thumbsize][e]:null==this.cache[this.cacheIndex]?null:this.cache[this.cacheIndex][e]},o.prototype.setCache=function(e,t,n,i){if(1==n)null!=this.cache[this.thumbsize]&&(this.cache[this.thumbsize][e]=t);else{var o=null==i?this.cacheIndex:i;null!=this.cache[o]&&(this.cache[o][e]=t)}},o.prototype.setTarget=function(e){var t=this;if(null==e)return this.targetObject;this.targetObject=e,e.contentProvider=this,e.container.removeClass("df-loading df-init"),null!=t.linkService&&(t.linkService.setViewer(e),t.initOutline()),e.processPage=function(e,i){e>0&&e<=t.pageCount?t.getPage(e,i):t.setPage(e,n.textureLoadFallback,i)},e.requestPage=function(){t.review("Request")},null!=e.resize&&e.resize()},o.prototype.review=function(e){var t=this;e=e||"timer review",clearTimeout(t.textureLoadTimeOut),t.textureLoadTimeOut=setTimeout((function(){t.textureLoadTimeOut=setTimeout(t.reviewPages,t.waitPeriod/2,t,e)}),t.waitPeriod)},o.prototype.reviewPages=function(e,n){var i=(e=e||this).targetObject;if(null!=i){var o=T(i);null!=n&&P(n);var a,s=!1;for(a=0;a<e.targetObject.children.length;a++)if(1==i.children[a].isFlipping){s=!0;break}if(0==s){var r=i.children.length>3?3:i.children.length,l=o?i._activePage:L(i._activePage);for(e.baseNumber=l,e.zoomScale>1&&(r=1),a=0;a<r;a++){var c=Math.floor(a/2),d=a%2==0?-c*(o?1:2):(0==c?1:c)*(o?1:2),u=l+d,h=l+d+1,p=i.getPageByNumber(u),g=i.getPageByNumber(h),f=u+"|"+e.cacheIndex,m=h+"|"+e.cacheIndex,v=0;if(null!=p&&p.frontPageStamp!=f&&1==p.visible&&(p.frontTextureLoaded=!1,i.processPage(u,(function(){e.review("Batch Call")})),p.frontPageStamp=f,v++),null==g||g.backPageStamp==m||1!=g.visible||o||(g.backTextureLoaded=!1,i.processPage(h,(function(){e.review("Batch Call")})),g.backPageStamp=m,v++),0==d&&e.annotedPage!==l&&(e.getAnnotations(u),o||e.getAnnotations(h),e.annotedPage=l),v>0)break}0==v&&"css"!==i.mode&&e.setLoading(l)}else if(e.review("Revisit request"),null!=e.annotedPage&&"css"!==i.mode){var b=L(i._activePage);t(i.getContentLayer(b)).html(""),t(i.getContentLayer(b+1)).html(""),e.annotedPage=null}}},o.prototype.getPage=function(i,o,a){var s=this,l=i=parseInt(i,10),c=s.contentSource;function d(t,n,i,o){var a=s.options.forceFit,r=s.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&n>1&&n<s.pageCount,l=r&&a?2:1,c=a?t.getViewport({scale:1}):s.normalViewport,d=s.cacheIndex/Math.max(c.width/l,c.height);1==s.webgl&&(d=y(s.cacheIndex)/(s.pageRatio>1?c.width/l:c.height));var u=document.createElement("canvas"),h=performance.now(),p=s.cacheIndex,g=u.getContext("2d");1==o&&(d=s.thumbsize/s.normalViewport.height),u.height=Math.round(c.height*d),u.width=Math.round(c.width/l*d),"css"==s.targetObject.mode&&Math.abs(s.targetObject.zoomHeight-u.height)<2&&(u.height=s.targetObject.zoomHeight+0,u.width=s.targetObject.zoomWidth+0),c=t.getViewport({scale:d}),P("rendering "+n+" at "+u.width+"x"+u.height),r&&(k(s.targetObject)?n%2==0&&(c.transform[4]=-u.width):n%2==1&&(c.transform[4]=-u.width));var f={canvasContext:g,viewport:c};t.cleanupAfterRender=!0,t.render(f).promise.then((function(){P(performance.now()-h),h=performance.now(),1==o||1==s.options.canvasToBlob&&!0!==s.webgl?u.toBlob((function(t){var a=e.createObjectURL(t,"image/jpeg");P(performance.now()-h),s.setCache(n,a,o,p),s.setPage(n,a,i,o)}),"image/jpeg",s.pdfRenderQuality):(P("Setting Page "+n),s.setPage(n,u,i,o)),f=null}))}i<=0&&i>=s.pageCount?s.setPage(i,n.textureLoadFallback,o,a):s.contentSourceType==r.PDF?null!=s.getCache(i,a)?(s.setPage(i,s.getCache(i,a),o,a),P("Page "+i+" loaded from cache")):(!0!==a&&s.setLoading(i,!0),s.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&i>2&&(l=Math.ceil((i-1)/2)+1),c.getPage(l,a).then((function(e){d(e,i,o,a)}))):s.contentSourceType!=r.IMAGE&&s.contentSourceType!=r.HTML||(null!=s.getCache(i,a)?(s.setPage(i,s.getCache(i,a),o,a),P("Page "+i+" loaded from cache")):(!0!==a&&s.setLoading(i,!0),s.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&i>2&&(l=Math.ceil((i-1)/2)+1),function(e,n,i){t("<img/>").attr("src",e).on("load",(function(){t(this).off(),null!=n&&n(e),P(this.height+":"+this.width)}))}(c[l-1],(function(e){s.setCache(i,e,a,s.cacheIndex),s.setPage(i,e,o,a),null!=o&&o()}),s.isCrossOrigin)))},o.prototype.getTargetPage=function(e){},o.prototype.setLoading=function(e,n){if(null!=this.targetObject)if(1==this.webgl){var i=this.targetObject.container;1==n?!0!==i.isLoading&&(i.addClass("df-loading"),i.isLoading=!0,P("Loading icon at "+e+" as "+n)):null!=i.isLoading&&(i.removeClass("df-loading"),i.isLoading=null,P("Loading icon at "+e+" as "+n))}else{var o=t(this.targetObject.getContentLayer(e));null!=o&&(1==n?o.addClass("df-page-loading"):o.removeClass("df-page-loading"),P("Loading icon at "+e+" as "+n))}},o.prototype.getAnnotations=function(n){var i=this;if(0!=i.options.enableAnnotation){var o=i.targetObject;n=parseInt(n,10);var a=i.contentSource,s=t(o.getContentLayer(n));if(s.empty(),n>0&&n<=i.pageCount){if(i.contentSourceType==r.PDF){L(n);var l=n;i.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&n>2&&(l=Math.ceil((n-1)/2)+1),a.getPage(l).then((function(e){if(null!=s&&s.length>0){var t=e.getViewport({scale:1});t=e.getViewport({scale:i.viewport.height/t.height}),i.setupAnnotations(e,t,s,n)}}))}if(null!=i.links&&null!=i.links[n])for(var c=i.links[n],d=0;d<c.length;d++){var u,h=c[d];h.dest&&h.dest.indexOf&&0==h.dest.indexOf("[html]")?((u=document.createElement("div")).innerHTML=h.dest.substr(6),u.className="customHtmlAnnotation"):((u=document.createElement("a")).setAttribute("dest",h.dest),u.className="customLinkAnnotation",u.href="#"+h.dest,u.onclick=function(){var e=this.getAttribute("dest");return e&&i.linkService.customNavigateTo(e),!1}),u.style.left=h.x+"%",u.style.top=h.y+"%",u.style.width=h.w+"%",u.style.height=h.h+"%",s[0].appendChild(u)}if(null!=i.html&&null!=i.html[n]){var p=i.html[n];s.append(t("<div class='customHTMLAnnotation'>").html(p))}}}},o.prototype.setPage=function(e,t,i,o){var a=this,s=a.targetObject,r=k(s),l=T(s);if(1==o){a.targetObject.container.find("#df-thumb"+e).css({backgroundImage:m(t)})}else{t==n.textureLoadFallback&&P("Fallback on "+e);var c=s.getPageByNumber(e);null!=c?e%2!=0&&!r||e%2!=1&&r&&!l||l&&!r?(P(e+"rendered to back of "+c.color),c.backImage(t,(function(t,n){c.backTextureLoaded=!0,a.setLoading(e),a.requiresImageTextureScaling&&n&&1!=e&&e!=a.pageCount&&(n.repeat.x=.5,n.offset.x=.5),null!=i&&i()}))):(P(e+"rendered to front of "+c.color),c.frontImage(t,(function(t,n){c.frontTextureLoaded=!0,a.setLoading(e),a.requiresImageTextureScaling&&n&&1!=e&&e!=a.pageCount&&(n.repeat.x=.5),null!=i&&i()}))):P("Invalid set request on Page "+e)}},o.prototype.setupAnnotations=function(i,o,a,s){if(null!=a&&0!=t(a).length){var r=this;return i.getAnnotations().then((function(l){if(o=o.clone({dontFlip:!0}),r.options.pageSize,e.PAGE_SIZE.DOUBLEINTERNAL,null!=a){0==(a=t(a)).find(".annotationDiv").length&&a.append(t("<div class='annotationDiv'>"));var c=a.find(".annotationDiv");if(c.empty(),r.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&s>2&&s%2==1?c.css({left:"-100%"}):1==s&&c.css({left:""}),pdfjsLib.AnnotationLayer.render({annotations:l,div:c[0],page:i,viewport:o,imageResourcesPath:n.imageResourcesPath,linkService:r.linkService}),r.options.annotationClass&&""!==r.options.annotationClass&&c.find(" > section").addClass(r.options.annotationClass),1==r.options.search){0==a.find(".textLayerDiv").length&&a.append(t("<div class='textLayerDiv'>"));var d=a.find(".textLayerDiv");i.getTextContent().then((function(t){var n=new e.TextLayerBuilder({textLayerDiv:d[0],pageIndex:null,viewport:o.clone({dontFlip:!1})});n.setTextContent(t),n.render()}))}}}))}},o}(),j=function(){function i(e){this.angles=e.angles||[0,0,0,0,0,0],this.stiffness=e.angles||.1,this.segments=e.segments||1,this.canvasMode=e.contentSourceType!==r.IMAGE&&0==e.canvasToBlob,this.initDOM()}function o(e){var n=e.contentLayer=t(d.div,{class:"df-page-content"});e.append(n)}return i.prototype={initDOM:function(){var e=this.element=t(d.div,{class:"df-book-page"}),n=this.wrapper=t(d.div,{class:"df-page-wrapper"}),i=this.front=t(d.div,{class:"df-page-front"}),a=this.back=t(d.div,{class:"df-page-back"}),s=this.foldInnerShadow=t(d.div,{class:"df-page-fold-inner-shadow"}),r=this.foldOuterShadow=t(d.div,{class:"df-page-fold-outer-shadow"});this.frontIMG=new Image,this.backIMG=new Image,o(i,this.segments),o(a,this.segments),e.append(n).append(r),n.append(i).append(a).append(s)},updatePoint:function(t){if(null!=t){var n=null!=this.parent.dragPage?this.parent.dragPage:null!=t.page?t.page:this,i=n.element.width(),o=n.element.height(),a=null!=this.parent.corner?this.parent.corner:t.corner,s=e.CORNERS,r=n.side==l.right,c=a==s.BL||a==s.BR;t.rx=1==r?2*i-t.x:t.x,t.ry=1==c?o-t.y:t.y;var d=Math.atan2(t.ry,t.rx);d=Math.PI/2-v(d,0,h(90));var u=r?t.x/2:i-t.x/2,m=t.ry/2,w=Math.max(0,Math.sin(d-Math.atan2(m,u))*b(u,m)),x=.5*b(t.rx,t.ry),P=Math.round(i-w*Math.sin(d)),y=Math.round(w*Math.cos(d)),C=p(d),L=c?r?90-C+180:180+C:r?C:90-C,S=c?r?90-C+180:C:r?C+180:L,E=c?r?90-C:C+90:r?L-90:L+180,T=r?i-P:P,k=c?o+y:-y,O=r?-P:P-i,R=c?-o-y:y,F=v(.5*t.distance/i,0,.5),M=v(.5*(2*i-t.rx)/i,.05,.3);n.element.addClass("df-folding");var D=r?n.back:n.front,N=r?n.front:n.back,z=n.foldOuterShadow,B=n.foldInnerShadow;n.wrapper.css({transform:g(T,k)+f(L)}),D.css({transform:f(-L)+g(-T,-k)}),N.css({transform:f(S)+g(O,R),boxShadow:"rgba(0, 0, 0, "+F+") 0px 0px 20px"}),B.css({transform:f(S)+g(O,R),opacity:M/2,backgroundImage:I.css+"linear-gradient( "+E+"deg, rgba(0, 0, 0, 0.25) , rgb(0, 0, 0) "+.7*x+"px, rgb(255, 255, 255) "+x+"px)"}),z.css({opacity:M/2,left:r?"auto":0,right:r?0:"auto",backgroundImage:I.css+"linear-gradient( "+(180-E)+"deg, rgba(0, 0, 0,0) "+x/3+"px, rgb(0, 0, 0) "+x+"px)"})}},updateAngle:function(e,t){var n=5*this.element.width();this.wrapper.css({perspective:n,perspectiveOrigin:1==t?"0% 50%":"100% 50%"}),this.front.css({display:1==t?e<=-90?"block":"none":e<90?"block":"none",transform:("MfS"!==I.dom?"":"perspective("+n+"px) ")+(1==t?"translateX(-100%) ":"")+"rotateY("+((1==t?180:0)+e)+"deg)"}),this.back.css({display:1==t?e>-90?"block":"none":e>=90?"block":"none",transform:("MSd"!==I.dom?"":"perspective("+n+"px) ")+(0==t?"translateX(100%) ":"")+"rotateY("+((0==t?-180:0)+e)+"deg)"})},tween:function(t){var n=this;if(null!=n&&null!=n.parent){var i,o=T(n.parent),a=n.side==l.right,s=n.parent.direction==e.DIRECTION.RTL,r=n.parent.corner==e.CORNERS.BL||n.parent.corner==e.CORNERS.BR,c=1==n.magnetic,d=r?n.parent.height:0,u=0,h=n.end=n&&1==n.animateToReset?{x:a?n.parent.fullWidth:0,y:d}:{x:a?0:n.parent.fullWidth,y:d};n.ease=n.isHard?TWEEN.Easing.Quadratic.InOut:TWEEN.Easing.Linear.None;var p=n.parent.duration;1==n.isHard?(null!=t&&(u=x(t.distance,t.fullWidth)),i=n.init={angle:u*(a?-1:1)},h=n.end=n&&1==n.animateToReset?{angle:a?0:-0}:{angle:a?-180:180}):null==t?(i=n.init=n&&1==n.animateToReset?{x:a?0:n.parent.fullWidth,y:0}:{x:a?n.parent.fullWidth:0,y:0},n.first={x:(a?3:1)*n.parent.fullWidth/4,y:0},n.mid={x:(a?1:3)*n.parent.fullWidth/4,y:0}):(i=n.init={x:t.x,y:t.y,opacity:1},n.first={x:3*t.x/4,y:3*t.y/4,opacity:1},n.mid={x:t.x/4,y:t.y/4,opacity:1},p=n.parent.duration*w(i.x,i.y,h.x,h.y)/n.parent.fullWidth,p=v(p,n.parent.duration/3,n.parent.duration)),i.index=0,h.index=1,n.isFlipping=!0;var g=function(e){1==n.isHard?(n.updateAngle(e.angle,a),n.angle=e.angle):(n.updatePoint({x:e.x,y:e.y}),n.x=e.x,n.y=e.y),o&&!c&&(n.element[0].style.opacity=a&&!s||!a&&s?e.index>.5?2*(1-e.index):1:e.index<.5?2*e.index:1)};o&&(!a&&!s||a&&s)&&(n.element[0].style.opacity=0);n.completeTween=n.completeTween||function(t){n.isFlipping=!1,1==n.isHard?(n.updateAngle(n.end.angle),n.back.css({display:"block"}),n.front.css({display:"block"})):n.updatePoint({x:n.end.x,y:n.end.y}),n.element[0].style.opacity=1,!0!==n.animateToReset?n.side=n.side==l.right?l.left:l.right:n.animateToReset=null,n.currentTween=null,n.pendingPoint=null,n.magnetic=!1,n.parent.dragPage=null,n.parent.corner=e.CORNERS.NONE,1!=t&&n.parent.refresh()};1==n.isHard?n.currentTween=new TWEEN.Tween(i).delay(0).to(h,n.parent.duration).onUpdate((function(){g(this)})).easing(n.ease).onComplete(n.completeTween).start():null==t?n.currentTween=new TWEEN.Tween(i).delay(0).to(h,n.parent.duration).onUpdate((function(){g(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(n.completeTween).start():(n.currentTween=new TWEEN.Tween(i).delay(0).to(h,p).onUpdate((function(){g(this)})).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(n.completeTween),n.currentTween.start())}},frontImage:function(e,i){var o=this;function a(){o.front.css({backgroundImage:m(e)}),null!=i&&i()}1==o.canvasMode?(o.front.find(">canvas").remove(),e!==n.textureLoadFallback&&o.front.append(t(e)),null!=i&&i()):e==n.textureLoadFallback?a():(o.frontIMG.onload=a,o.frontIMG.src=e)},backImage:function(e,i){var o=this;function a(){o.back.css({backgroundImage:m(e)}),null!=i&&i()}1==o.canvasMode?(o.back.find(">canvas").remove(),e!==n.textureLoadFallback&&o.back.append(t(e)),null!=i&&i()):e==n.textureLoadFallback?a():(o.backIMG.onload=a,o.backIMG.src=e)},updateCSS:function(e){this.element.css(e)},resetCSS:function(){this.wrapper.css({transform:""}),this.front.css({transform:"",boxShadow:""}),this.back.css({transform:"",boxShadow:""})},clearTween:function(e){this.currentTween.stop(),this.completeTween(1==e),this.resetCSS()}},i}(),U=function(o){function a(e){for(var t=!1,n=0;n<e.pages.length;n++){if(1==e.pages[n].isFlipping){t=!0;break}}return t}function r(n,o){var r=this;function c(e){r.dragPage!=e.page&&1==e.page.visible&&(r.dragPage.clearTween(!0),r.dragPage=e.page,r.corner=e.corner,r.dragPage.pendingPoint=e)}r.type="BookCSS",r.images=n.images||[],r.pageCount=n.pageCount||1,r.foldSense=50,r.stackCount=4,r.mode="css",r.pages=[],r.duration=n.duration,r.container=t(o),r.options=n,r.drag=l.none,r.pageMode=n.pageMode||(O||r.pageCount<=2?e.PAGE_MODE.SINGLE:e.PAGE_MODE.DOUBLE),r.singlePageMode=n.singlePageMode||(O?e.SINGLE_PAGE_MODE.BOOKLET:e.SINGLE_PAGE_MODE.ZOOM),r.swipe_threshold=O?15:50,r.direction=n.direction||e.DIRECTION.LTR,r.startPage=1,r.endPage=r.pageCount,r._activePage=n.openPage||r.startPage,r.hardConfig=n.hard,i="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,r.animateF=function(){TWEEN.getAll().length>0?TWEEN.update():clearInterval(r.animate)},r.init(n),r.skipDrag=!1;var d=function(t){var n=r.eventToPoint(t);if(null!=t.touches&&2==t.touches.length&&null!=r.startTouches){r.zoomDirty=!0;var i=s.getVectorAvg(s.getTouches(t,r.container.offset())),o=s.calculateScale(r.startTouches,s.getTouches(t));r.lastScale,r.contentProvider.zoomScale,i.x,i.y;r.stage.css({transform:"translate3d("+r.left+"px,"+r.top+"px,0) scale3d("+o+","+o+",1)"}),r.lastScale=o,r.lastZoomCenter=i,t.preventDefault()}if(!(null!=t.touches&&t.touches.length>1||null==r.startPoint||null!=r.startTouches)){var c=r.dragPage||n.page;if(1!==r.contentProvider.zoomScale)null==t.touches&&1!=r.isPanning||(r.pan(n),t.preventDefault());else if(!0!==r.skipDrag){n.distance;if(!a(r)){if(null!=r.dragPage||1==n.isInside){null!=r.dragPage?P("set mouse down move"):(n.y=v(n.y,1,r.height-1),n.x=v(n.x,1,n.fullWidth-1));var d=r.corner||n.corner;if(c.isHard){var u=d==e.CORNERS.BR||d==e.CORNERS.TR,h=x(n.distance,n.fullWidth);c.updateAngle(h*(u?-1:1),u)}else c.updatePoint(n,r);c.magnetic=!0,c.magneticCorner=n.corner,t.preventDefault()}if(null==r.dragPage&&null!=c&&0==n.isInside&&1==c.magnetic&&(c.pendingPoint=n,c.animateToReset=!0,r.corner=c.magneticCorner,r.animatePage(c),c.pendingPoint=null,c.magnetic=!1,c.magneticCorner=null),1==r.isPanning&&null==r.dragPage&&1==r.contentProvider.zoomScale){var p=n.x-r.lastPos;performance.now(),r.lastTime;Math.abs(p)>r.swipe_threshold&&(p<0?r.next():r.prev(),r.drag=l.none,r.isPanning=!1,t.preventDefault()),r.lastPos=n.x,r.lastTime=performance.now()}}}}},u=function(t){if(null!=t.touches&&0==t.touches.length){r.contentProvider.zoomScale;1==r.zoomDirty&&(r.previewObject.contentProvider.zoomScale=s.limitAt(r.previewObject.contentProvider.zoomScale*r.lastScale,1,r.previewObject.contentProvider.maxZoom),r.previewObject.zoomValue=1*r.previewObject.contentProvider.zoomScale,r.previewObject.resize(),r.zoomDirty=!1),r.wrapper.css({transform:""}),r.lastScale=null,r.startTouches=null}if(r.isPanning=!1,!(null!=t.touches&&t.touches.length>1)&&!0!==r.skipDrag){var n=r.eventToPoint(t);r.dragPage&&(t.preventDefault(),r.dragPage.pendingPoint=n,n.x==r.startPoint.x&&n.y==r.startPoint.y&&1==n.isInside?r.corner==e.CORNERS.BR||r.corner==e.CORNERS.TR?(c(n),!0!==r.dragPage.isFlipping&&r.next()):r.corner!=e.CORNERS.BL&&r.corner!=e.CORNERS.TL||(c(n),!0!==r.dragPage.isFlipping&&r.prev()):!0!==r.dragPage.isFlipping&&(n.distance>n.fullWidth/2?n.x>n.fullWidth/2?r.prev():r.next():(r.dragPage.animateToReset=!0,r.animatePage(r.dragPage))),r.dragPage&&(r.dragPage.pendingPoint=null,r.dragPage.magnetic=!1)),r.drag=l.none}},h=function(t){var n=r.eventToPoint(t),i=t.srcElement||t.originalTarget;r.dragPage&&r.dragPage.magnetic||r.wrapper[0].contains(t.target)&&1==r.contentProvider.zoomScale&&n.x==r.startPoint.x&&n.y==r.startPoint.y&&n.isInsidePage&&r.startPoint.page==n.page&&!n.page.isFlipping&&"A"!==i.nodeName&&(0==r.startPoint.page.side?(r.corner=e.CORNERS.TL,r.prev(),r.startPoint.page=null):(r.corner=e.CORNERS.TR,r.next(),r.startPoint.page=null),r.isPanning=!1)},p=function(t){if(null!=t.touches&&2==t.touches.length&&null==r.startTouches&&(r.startTouches=s.getTouches(t),r.lastScale=1),!(null!=t.touches&&t.touches.length>1||null==t.touches&&0!==t.button)){var n=r.eventToPoint(t);r.startPoint=n,r.left=r.left||0,r.top=r.top||0,r.isPanning=!0,r.lastPos=n.x,r.lastTime=performance.now(),!0!==r.skipDrag&&(1!=n.isInside||a(r)||(r.startPoint=n,r.drag=n.drag,r.dragPage=n.page,r.corner=n.corner,P(r.corner),function(e){e.parent.container.find(".df-folding").removeClass("df-folding"),e.element.addClass("df-folding")}(r.dragPage),n.page.isHard||n.page.updatePoint(n,r),"0"==n.page.name?r.shadow.css({width:"50%",left:r.direction==e.DIRECTION.RTL?0:"50%",transitionDelay:""}):n.page.name==Math.ceil(r.pageCount/2)-1&&r.shadow.css({width:"50%",left:r.direction==e.DIRECTION.RTL?"50%":0,transitionDelay:""})))}},g=function(e){var t=0;null!=e.wheelDelta?t=e.wheelDelta/120:null!=e.detail&&(t=-e.detail/3);var n=r.contentProvider.zoomScale,i=r.contentProvider.maxZoom;if(t&&(t>0&&n<i||t<0&&n>1)){e.stopPropagation(),e.preventDefault();var o=r.eventToPoint(e),a=r.eventToPoint(e),s={x:r.container.width()/2,y:r.container.height()/2-23};r.previewObject.zoom(t);var l=r.contentProvider.zoomScale;if(n!==l){var c=l/n;1==l?(r.left=0,r.top=0):(r.left*=c,r.top*=c);var d=(o.raw.x-s.x)*c,u=(o.raw.y-s.y)*c;a.raw.x=s.x+d,a.raw.y=s.y+u,r.startPoint=a,r.pan(o);var h=r.dragPage||o.page;null==r.dragPage&&null!=h&&1==o.isInside&&1==h.magnetic&&(h.pendingPoint=o,h.animateToReset=!0,r.corner=h.magneticCorner,r.animatePage(h),h.pendingPoint=null,h.magnetic=!1,h.magneticCorner=null)}}},f=r.container[0],m=r.stage[0];f&&(m.addEventListener("mousemove",d,!1),m.addEventListener("touchmove",d,!1),m.addEventListener("mousedown",p,!1),m.addEventListener("click",h,!1),m.addEventListener("mouseup",u,!1),m.addEventListener("touchend",u,!1),m.addEventListener("touchstart",p,!1),1==r.options.scrollWheel&&(m.addEventListener("mousewheel",g,!1),m.addEventListener("DOMMouseScroll",g,!1))),this.dispose=function(){m.removeEventListener("mousemove",d,!1),m.removeEventListener("touchmove",d,!1),m.removeEventListener("mousedown",p,!1),m.removeEventListener("click",h,!1),m.removeEventListener("mouseup",u,!1),m.removeEventListener("touchend",u,!1),m.removeEventListener("touchstart",p,!1),1==r.options.scrollWheel&&(m.removeEventListener("mousewheel",g,!1),m.removeEventListener("DOMMouseScroll",g,!1)),r.updatePageCallback=null,r.flipCallback=null,r.animateF=null,r.stage.remove()}}return D(r,{}),r.prototype={add:function(e){e instanceof j?this.container.append(t(e.element)):this.container.append(t(e))},pan:function(e){var t=this.startPoint,n=this.contentProvider.zoomScale,i=this.left+(e.raw.x-t.raw.x),o=this.top+(e.raw.y-t.raw.y);this.left=Math.round(v(i,-this.shiftWidth,this.shiftWidth)),this.top=Math.round(v(o,-this.shiftHeight,this.shiftHeight)),1==n&&(this.left=0,this.top=0),this.startPoint=e,this.stage.css({transform:"translate3d("+this.left+"px,"+this.top+"px,0)"})},getPageByNumber:function(e){for(var t,n=T(this)?k(this)?e+1:e:Math.floor((e-1)/2),i=0;i<this.pages.length;i++)n==parseInt(this.pages[i].name,10)&&(t=this.pages[i]);return t},getPageSide:function(t){var n=this.direction==e.DIRECTION.RTL,i=this.getPageByNumber(t);if(null!=i)return T(this)?n?i.front:i.back:t%2==0?n?i.back:i.front:n?i.front:i.back},getContentLayer:function(e){var t=this.getPageSide(e);return null==t?null:t.contentLayer}},r.prototype.init=function(e){var n=this;n.stage=t(d.div,{class:"df-book-stage"}),n.wrapper=t(d.div,{class:"df-book-wrapper"}),n.shadow=t(d.div,{class:"df-book-shadow"}),n.container.append(n.stage),n.stage.append(n.wrapper),n.wrapper.append(n.shadow),n.createStack(e)},r.prototype.createStack=function(e){for(var t="red,green,blue,yellow,orange,black".split(","),n=0;n<this.stackCount;n++){e.angles=[,this.stackCount-n],e.stiffness=(this.stackCount-n)/100;var i=new j(e);i.angles[1]=180,i.index=n,i.parent=this,i.textureReady=!1,i.textureRequested=!1,this.wrapper.append(i.element),i.isFlipping=!1,this.pages.push(i),i.color=t[n]}this.children=this.pages},r.prototype.isPageHard=function(e){return s.isHardPage(this.hardConfig,e,this.pageCount,T(this))},r.prototype.setDuration=function(e){this.duration=e},r.prototype.moveBy=function(e){var t=this._activePage+e;t=v(t,this.startPage,this.endPage),1!=this.firstFlipped&&(this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options}),this.firstFlipped=!0),this.gotoPage(t)},r.prototype.next=function(t){null==t&&(t=this.direction==e.DIRECTION.RTL?-this.pageMode:this.pageMode),this.moveBy(t)},r.prototype.prev=function(t){null==t&&(t=this.direction==e.DIRECTION.RTL?this.pageMode:-this.pageMode),this.moveBy(t)},r.prototype.eventToPoint=function(n){n=E(n);var i=this.wrapper,o=this.pages,a=this.pageWidth,s=this.fullWidth,r=this.height,c=(t(window),{x:n.clientX,y:n.clientY}),d=c.x-i[0].getBoundingClientRect().left,u=c.y-i[0].getBoundingClientRect().top;c.x=c.x-this.container[0].getBoundingClientRect().left,c.y=c.y-this.container[0].getBoundingClientRect().top;var h,p=this.drag==l.none?d<a?d:s-d:this.drag==l.left?d:s-d,g=d<a?o[this.stackCount/2-1]:o[this.stackCount/2],f=d<this.foldSense?l.left:d>s-this.foldSense?l.right:l.none,m=d,v=u,b=r,w=s,x=this.foldSense,P=e.CORNERS;return{isInsidePage:m>=0&&m<=w&&v>=0&&v<=b,isInside:(h=m>=0&&m<x?v>=0&&v<=x?P.TL:v>=b-x&&v<=b?P.BL:v>x&&v<b-x?P.L:P.NONE:m>=w-x&&m<=w?v>=0&&v<=x?P.TR:v>=b-x&&v<=b?P.BR:v>x&&v<b-x?P.R:P.NONE:P.NONE)!==P.NONE&&h!==P.L&&h!==P.R,x:d,y:u,fullWidth:s,rawDistance:s-d,distance:p,page:g,drag:f,foldSense:this.foldSense,event:n,raw:c,corner:h}},r.prototype.gotoPage=function(e){e=parseInt(e,10),this._activePage=e,1==this.autoPlay&&this.previewObject.setAutoPlay(this.autoPlay),this.updatePage(e),this&&this.thumblist&&this.thumblist.review&&this.thumblist.review()},r.prototype.refresh=function(){this.updatePage(this._activePage),null!=this.flipCallback&&this.flipCallback()},r.prototype.updatePage=function(i){var o=this.direction==e.DIRECTION.RTL,a=T(this),s=(L(i),a?1:2);i=Math.floor(i/s),o&&(i=Math.ceil(this.pageCount/s)-i);var r=this.oldBaseNumber||0,c=this.pageCount/s,d=this.stackCount,u=Math.floor(d/2);r>i?(this.children[d-1].skipFlip=!0,this.children.unshift(this.children.pop())):r<i&&(this.children[0].skipFlip=!0,this.children.push(this.children.shift()));for(var h=0;h<d;h++){var p=this.children[h];r!==i&&null!=p.currentTween&&p.clearTween(!0);var g,f=p.side,m=i-u+h;o&&(m=a?this.pageCount-m:Math.ceil(this.pageCount/2)-m-1);var v=p.name;p.isHard=this.isPageHard(m),p.isHard?p.element.addClass("df-hard-page"):(p.element.removeClass("df-hard-page"),p.front.css({display:"block"}),p.back.css({display:"block"})),0==m||m==c?p.element.addClass("df-cover-page"):p.element.removeClass("df-cover-page"),t(p.element).attr("pageNumber")!=m&&(p.front.contentLayer.empty(),p.back.contentLayer.empty()),t(p.element).attr("pageNumber",m),p.isEdge=!1,0==h||h==d-1||(p.isEdge=!1),g=h<u?l.left:l.right,0==p.isFlipping&&(g!==f&&0==p.skipFlip?(this.animatePage(p),null!=this.preFlipCallback&&this.preFlipCallback()):(p.skipFlip=!1,p.element.removeClass("df-flipping df-quick-turn df-folding df-left-side df-right-side"),p.element.addClass(h<u?"df-left-side":"df-right-side"),p.side=g)),p.visible=a?o?h<u||p.isFlipping:h>=u||p.isFlipping:m>=0&&m<c||a&&m==c,null!=this.requestPage&&1==p.visible&&(p.name=m.toString(),p.name!=v&&(p.backTextureLoaded=!1,p.frontTextureLoaded=!1,p.backPageStamp="-1",p.frontPageStamp="-1",p.thumbLoaded=!1,p.front.contentLayer.html(""),p.back.contentLayer.html(""),p.frontImage(n.textureLoadFallback),p.backImage(n.textureLoadFallback),this.requestPage())),p.oldDepth=p.depth,p.updateCSS({display:1==p.visible?"block":"none",zIndex:6+(h<u?h-u:u-h),transform:""}),null==p.pendingPoint&&0==p.isFlipping&&p.resetCSS()}0==TWEEN.getAll().length&&clearInterval(this.animate),t(".quick-hint").html(i),this.oldBaseNumber=i,this.updatePageCallback&&this.updatePageCallback()},r.prototype.animatePage=function(e){e.element.addClass("df-flipping"),e.isFlipping=!0,null!=this.animate&&clearInterval(this.animate),this.animate=setInterval(this.animateF,30),e.tween(e.pendingPoint)},r}(),H=function(i){function o(n,o,s){i.call(this,s);var r=this;r.type="FlipBook",r.container=n,r.options=s,r.options.source=o,r.contentSource=o,null!=s.height&&s.height.toString().indexOf("%")<0?r.container.height(Math.min(s.height,t(window).height())):r.container.height(s.height),r.options.isLightBox&&window.dfLightBox.closeButton.addClass(r.options.icons.close),r.options.pageSize==e.PAGE_SIZE.DOUBLEINTERNAL&&((Array===r.contentSource.constructor||Array.isArray(r.contentSource)||r.contentSource instanceof Array)&&(r.options.singlePageMode=e.SINGLE_PAGE_MODE.ZOOM),r.container.addClass("df-double-internal")),r.options.isLightBox||null==r.container.attr("id")||(r.options.id=r.container.attr("id")),!0!==r.options.parsed&&null!=r.options.links&&e.parseLinks(r.options.links);var l=r.webgl=1==s.webgl&&1==R;if(n.addClass("df-container df-loading df-init df-floating df-controls-"+r.options.controlsPosition),1==r.options.transparent&&n.addClass("df-transparent"),r.options.direction==e.DIRECTION.RTL&&n.addClass("df-rtl"),r.container.info=t(d.div,{class:"loading-info"}).appendTo(r.container).html(r.options.text.loading+"..."),(-1!==a.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0||F&&!M)&&(r.options.webgl=!1),a.match(/msie\s[5-9]/i))return r.container.info.html("Your browser (Internet Explorer) is out of date to run DFlip Flipbook Plugin. <br><a href='http://browsehappy.com/'>Upgrade to a new one</a>").addClass("df-old-browser"),n.removeClass("df-loading"),r;var c=null==s.backgroundImage||""==s.backgroundImage?"":"url('"+s.backgroundImage+"')";return r.container.css({position:"relative",overflow:"hidden",backgroundColor:s.backgroundColor,backgroundImage:c}),1==r.options.isLightBox&&r.analytics({eventAction:"Open Book",options:r.options}),r.init(l,o),null!=r.options.onCreate&&r.options.onCreate(r),r}return D(o,i),o.prototype.init=function(i){var o=this,a=o.target,s=o.options;if(1==i){!function(t){var i=function(){MOCKUP.defaults.anisotropy=0,MOCKUP.defaults.groundTexture="blank",THREE.skipPowerOfTwo=!0,B(),null!=t&&t()};null==window.MOCKUP?(o.updateInfo(s.text.loading+" WEBGL 3D ..."),"function"==typeof define&&define.amd&&window.requirejs?(requirejs.config({paths:{three:n.threejsSrc.replace(".js","")},shim:{three:{exports:"THREE"}}}),require(["three"],(function(t){return window.THREE=t,S(n.mockupjsSrc+"?ver="+e.version,(function(){i()})),t}))):"function"==typeof define&&define.amd?require(["three",n.threejsSrc.replace(".js","")],(function(e,t){e((function(){}))})):S(n.threejsSrc+"?ver="+e.version,(function(){S(n.mockupjsSrc+"?ver="+e.version,(function(){i()}))}))):i()}((function(){o.container.css({minHeight:300,minWidth:300}),o.stage=new z(C(o.options,{container:o.container})),o.stage.previewObject=o,o.contentProvider=new _(o.contentSource,(function(n){var s={pageCount:n.pageCount,stackCount:6,segments:20,width:n.bookSize.width,height:n.bookSize.height};o.target=a=o.stage.target=new MOCKUP.Book(C(o.options,s),o.stage),o.extendtarget(),N(o.container,o),a.ui=o.ui,a.container=o.container,n.webgl=i,n.setTarget(o.target),a.getContentLayer=function(t){var n=a.direction==e.DIRECTION.RTL,i=o.stage.cssScene.divLeft.element,s=o.stage.cssScene.divRight.element;L(a._activePage);return T(a)?n?i:s:t%2==0?n?s:i:n?i:s},a.stage=o.stage,a.flipCallback=function(){if(o.contentProvider){o.contentProvider.review("flipCallback");var n,i,s=L(a._activePage),r=a.getPageByNumber(s),l=a.getPageByNumber(s+1),c=a.parent.cssScene.divLeft,d=a.parent.cssScene.divRight;a.pageMode,e.PAGE_MODE.SINGLE,a.direction,e.DIRECTION.RTL;null!=r&&null!=c&&(n=Math.abs(r.geometry.boundingBox.max.x-r.geometry.boundingBox.min.x),i=Math.abs(r.geometry.boundingBox.max.z-r.geometry.boundingBox.min.z),c.rotation.y=.9*-Math.atan2(i,n),c.position.z=.8*i,c.position.x=i/2.5,t(c.element).css({width:n,left:-n/2})),null!=l&&null!=d&&(n=Math.abs(l.geometry.boundingBox.max.x-l.geometry.boundingBox.min.x),i=Math.abs(l.geometry.boundingBox.max.z-l.geometry.boundingBox.min.z),d.rotation.y=.9*Math.atan2(i,n),d.position.z=.8*i,d.position.x=-i/2.5,t(d.element).css({width:n,left:n/2})),null!=o.options.onFlip&&o.options.onFlip(o)}},a.resize=void o.resize(),a.updatePageCallback=function(){o.ui.update(),o.checkCenter(),o.stage.renderRequestPending=!0};var r=t(o.stage.cssScene.divLeft.element),l=t(o.stage.cssScene.divRight.element);a.preFlipCallback=function(){r.empty(),l.empty(),null!=o.options.beforeFlip&&o.options.beforeFlip(o),o.playSound()},t(window).trigger("resize"),r.css({width:n.bookSize.width,height:n.bookSize.height,left:-n.bookSize.width/2}),l.css({width:n.bookSize.width,height:n.bookSize.height,left:n.bookSize.width/2}),a.ease=TWEEN.Easing.Cubic.InOut,a.contentProvider=n,a.duration=o.options.duration,a.gotoPage(a._activePage),a.flipCallback(),1==o.options.isLightBox&&o.analytics({eventAction:"Book Ready",options:o.options}),null!=o.options.onReady&&o.options.onReady(o)}),s,o)}))}else o.contentProvider=new _(o.contentSource,(function(e){var n={pageCount:e.pageCount,contentSourceType:e.contentSourceType};o.target=a=new U(C(o.options,n),o.container),o.target.previewObject=o,o.extendtarget(),N(o.container,o),e.webgl=i,e.setTarget(o.target),e.waitPeriod=2,a.ease=TWEEN.Easing.Quadratic.InOut,a.duration=o.options.duration,a.container=o.container,a.updatePageCallback=function(){o.ui.update(),o.checkCenter()},a.resize=void o.resize(),t(window).trigger("resize"),a.flipCallback=function(){o.contentProvider&&(o.contentProvider.review("flipCallback"),null!=o.options.onFlip&&o.options.onFlip(o))},a.preFlipCallback=function(){null!=o.options.beforeFlip&&o.options.beforeFlip(o),o.playSound()},a.gotoPage(a._activePage),a.flipCallback(),null!=o.options.onReady&&o.options.onReady(o),o.analytics({eventAction:"Book Ready",options:o.options})}),s,o)},o.prototype.extendtarget=function(){var e=this;e.target.previewObject=e,e.target.reset=function(){for(var t=0;t<e.target.children.length;t++){var n=e.target.children[t];n.skipFlip=!0,n.name="-2"}e.contentProvider.annotedPage="-2",e.target.refresh()}},o.prototype.getURLHash=function(){if(null!=this.options.id){var e=s.getSharePrefix()+(null!=this.options.slug?this.options.slug:this.options.id)+"/";null!=this.target&&null!=this.target._activePage&&(e+=this.target._activePage+"/"),window.location.hash=e}return window.location.href},o.prototype.end=function(){this.target.gotoPage(this.target.endPage)},o.prototype.gotoPage=function(e){this.target.gotoPage(e),null!=this.ui&&this.ui.update()},o.prototype.prev=function(){this.target.prev()},o.prototype.next=function(){this.target.next()},o.prototype.updateInfo=function(e){this.container&&this.container.info&&this.container.info.html&&this.container.info.html(e)},o.prototype.analytics=function(e){if(1==this.options.enableAnalytics)try{var t=e.options,n=void 0;t&&(n=t.bookTitle||t.slug||t.id);var i=window.gtag;if(i)i("event",e.eventAction,{event_category:"Flipbook",event_label:n});else(window.ga||window.__gaTracker)("send",{hitType:"event",eventCategory:"Flipbook",eventAction:e.eventAction,eventLabel:n})}catch(e){}},o}(A);t.fn.extend({shelf:function(){},flipBook:function(e,i){return new H(t(this),e,function(e){return t.extend(!0,{},n,e)}(i))}})}(DFLIP,jQuery),function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,a=i.prototype,s=e.FileReaderSync,r=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,h=d.revokeObjectURL,p=d,g=e.btoa,f=e.atob,m=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=a.fake=!0;c--;)r.prototype[l[c]]=c+1;return d.createObjectURL||(p=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),p.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):g?t+";base64,"+g(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(d,e)},o.append=function(e){var n=this.data;if(v&&(e instanceof m||e instanceof v)){for(var o="",a=new v(e),l=0,c=a.length;l<c;l++)o+=String.fromCharCode(a[l]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new r("NOT_READABLE_ERR");var d=new s;n.push(d.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&f?n.push(f(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},a.slice=function(e,t,n){var o=arguments.length;return o<3&&(n=null),new i(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},a.toString=function(){return"[object Blob]"},a.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var i=n&&n.type||"",o=new t;if(e)for(var a=0,s=e.length;a<s;a++)Uint8Array&&e[a]instanceof Uint8Array?o.append(e[a].buffer):o.append(e[a]);var r=o.getBlob(i);return!r.slice&&r.webkitSlice&&(r.slice=r.webkitSlice),r};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}(window),function(e){var t,n=e.Uint8Array,i=e.HTMLCanvasElement,o=i&&i.prototype,a=/\s*;\s*base64\s*(?:;|$)/i,s="toDataURL",r=function(e){for(var i,o,a=e.length,s=new n(a/4*3|0),r=0,l=0,c=[0,0],d=0,u=0;a--;)o=e.charCodeAt(r++),255!==(i=t[o-43])&&null!=i&&(c[1]=c[0],c[0]=o,u=u<<6|i,4===++d&&(s[l++]=u>>>16,61!==c[1]&&(s[l++]=u>>>8),61!==c[0]&&(s[l++]=u),d=0));return s};n&&(t=new n([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),i&&!o.toBlob&&(o.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)e(this.mozGetAsFile("canvas",t));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))e(this.msToBlob());else{var i,o=Array.prototype.slice.call(arguments,1),l=this[s].apply(this,o),c=l.indexOf(","),d=l.substring(c+1),u=a.test(l.substring(0,c));Blob.fake?((i=new Blob).encoding=u?"base64":"URI",i.data=d,i.size=d.length):n&&(i=u?new Blob([r(d)],{type:t}):new Blob([decodeURIComponent(d)],{type:t})),e(i)}},o.toDataURLHD?o.toBlobHD=function(){s="toDataURLHD";var e=this.toBlob();return s="toDataURL",e}:o.toBlobHD=o.toBlob)}(window),function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var e=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-e}}}(),function(){var e=e||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t){if(0===e.length)return!1;var n=0;for(t=null!=t?t:window.performance.now();n<e.length;)e[n].update(t)?n++:e.splice(n,1);return!0}}}();e.Tween=function(t){var n=t,i={},o={},a={},s=1e3,r=0,l=!1,c=!1,d=!1,u=0,h=null,p=e.Easing.Linear.None,g=e.Interpolation.Linear,f=[],m=null,v=!1,b=null,w=null,x=null;for(var P in t)i[P]=parseFloat(t[P],10);this.to=function(e,t){return null!=t&&(s=t),o=e,this},this.start=function(t){for(var s in e.add(this),c=!0,v=!1,h=null!=t?t:window.performance.now(),h+=u,o){if(o[s]instanceof Array){if(0===o[s].length)continue;o[s]=[n[s]].concat(o[s])}null!==i[s]&&(i[s]=n[s],i[s]instanceof Array==!1&&(i[s]*=1),a[s]=i[s]||0)}return this},this.stop=function(){return c?(e.remove(this),c=!1,null!==x&&x.call(n),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].stop()},this.complete=function(){return c?(e.remove(this),c=!1,null!==w&&w.call(n),this.completeChainedTweens(),this):this},this.completeChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].complete()},this.delay=function(e){return u=e,this},this.repeat=function(e){return r=e,this},this.yoyo=function(e){return l=e,this},this.easing=function(e){return p=null==e?p:e,this},this.interpolation=function(e){return g=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return m=e,this},this.onUpdate=function(e){return b=e,this},this.onComplete=function(e){return w=e,this},this.onStop=function(e){return x=e,this},this.update=function(e){var t,c,x;if(e<h)return!0;for(t in!1===v&&(null!==m&&m.call(n),v=!0),x=p(c=(c=(e-h)/s)>1?1:c),o)if(null!==i[t]){var P=i[t]||0,y=o[t];y instanceof Array?n[t]=g(y,x):("string"==typeof y&&(y=y.startsWith("+")||y.startsWith("-")?P+parseFloat(y,10):parseFloat(y,10)),"number"==typeof y&&(n[t]=P+(y-P)*x))}if(null!==b&&b.call(n,x),1===c){if(r>0){for(t in isFinite(r)&&r--,a){if("string"==typeof o[t]&&(a[t]=a[t]+parseFloat(o[t],10)),l){var C=a[t];a[t]=o[t],o[t]=C}i[t]=a[t]}return l&&(d=!d),h=e+u,!0}null!==w&&w.call(n);for(var L=0,S=f.length;L<S;L++)f[L].start(h+s);return!1}return!0}},e.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}},e.Interpolation={Linear:function(t,n){var i=t.length-1,o=i*n,a=Math.floor(o),s=e.Interpolation.Utils.Linear;return n<0?s(t[0],t[1],o):n>1?s(t[i],t[i-1],i-o):s(t[a],t[a+1>i?i:a+1],o-a)},Bezier:function(t,n){for(var i=0,o=t.length-1,a=Math.pow,s=e.Interpolation.Utils.Bernstein,r=0;r<=o;r++)i+=a(1-n,o-r)*a(n,r)*t[r]*s(o,r);return i},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(t,n){var i=e.Interpolation.Utils.Factorial;return i(t)/i(n)/i(t-n)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,o){var a=.5*(n-e),s=.5*(i-t),r=o*o;return(2*t-2*n+a+s)*(o*r)+(-3*t+3*n-2*a-s)*r+a*o+t}}},window.TWEEN=e}(),DFLIP.createBlob=function(e,t){if("undefined"!=typeof Blob)return new Blob([e],{type:t});var n=new MozBlobBuilder;return n.append(e),n.getBlob(t)},DFLIP.createObjectURL=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n){if("undefined"!=typeof URL&&URL.createObjectURL){var i=DFLIP.createBlob(t,n);return URL.createObjectURL(i)}for(var o="data:"+n+";base64,",a=0,s=t.length;a<s;a+=3){var r=255&t[a],l=255&t[a+1],c=255&t[a+2];o+=e[r>>2]+e[(3&r)<<4|l>>4]+e[a+1<s?(15&l)<<2|c>>6:64]+e[a+2<s?63&c:64]}return o}}();var ThumbList=function(){function e(t){var n=t&&t.w+"px"||"100%",i=t&&t.h+"px"||"100%",o=this.itemHeight=t.itemHeight;this.items=t.items,this.generatorFn=t.generatorFn,this.totalRows=t.totalRows||t.items&&t.items.length,this.addFn=t.addFn,this.scrollFn=t.scrollFn;var a=e.createScroller(o*this.totalRows);this.container=e.createContainer(n,i),this.container.appendChild(a),this.screenItemsLen=Math.ceil(t.h/o),this.offsetItems=this.screenItemsLen,this.cachedItemsLen=this.screenItemsLen+2*this.offsetItems,this._renderChunk(this.container,0);var s=this;s.lastRepaintY=0;this.screenItemsLen;function r(e){var t=e.target.scrollTop;if(!s.lastRepaintY||Math.abs(t-s.lastRepaintY)>=s.offsetItems*s.itemHeight){var n=parseInt(t/o,10)-s.offsetItems;s._renderChunk(s.container,n<0?0:n),s.lastRepaintY=t}s.lastScrolled=Date.now(),null!=s.scrollFn&&s.scrollFn(),e.preventDefault&&e.preventDefault()}s.dispose=function(){s.container&&s.container.parentNode&&s.container.parentNode.removeChild(s.container),s.container.removeEventListener("scroll",r)},s.container.addEventListener("scroll",r)}return e.prototype.reset=function(e){this.screenItemsLen=Math.ceil(e/this.itemHeight),this.cachedItemsLen=this.screenItemsLen+2*this.offsetItems;var t=parseInt(this.lastRepaintY/this.itemHeight,10)-this.offsetItems;this.needReset=!0,this._renderChunk(this.container,Math.max(t,0))},e.prototype.createRow=function(e){var t;return this.generatorFn&&((t=this.generatorFn(e)).classList.add("df-vrow"),t.style.position="absolute",t.style.top=e*this.itemHeight+"px",t.setAttribute("index",e)),t},e.prototype._renderChunk=function(e,t){var n=null==this.range;this.range=this.range||{min:0,max:this.cachedItemsLen};var i=this.range,o=i.min,a=i.max,s=!!n||t>=o;if(n||t!=o||0!=this.needReset){var r,l=n?o:s?a:t;l=l>this.totalRows?this.totalRows:l<0?0:l;var c=t+this.cachedItemsLen;for(c=c>this.totalRows?this.totalRows:c,r=l;r<c;r++)s?e.appendChild(this.createRow(r)):e.insertBefore(this.createRow(r),e.childNodes[1+r-l]),null!=this.addFn&&this.addFn(r);Math.abs(t-o);if(this.needReset=!1,!n&&e.childNodes.length>this.cachedItemsLen+1)for(var d=s?1:1+this.cachedItemsLen,u=d+(c-l);u>d;u--)e.childNodes[d]&&this.container.removeChild(e.childNodes[d]);this.range.min=t,this.range.max=c}},e.createContainer=function(e,t){var n=document.createElement("div");return n.style.width=e,n.style.height=t,n.style.overflow="auto",n.style.position="relative",n.style.padding=0,n},e.createScroller=function(e){var t=document.createElement("div");return t.style.opacity=0,t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="1px",t.style.height=e+"px",t},e}(),BookMarkViewer=function(){function e(e){this.outline=null,this.lastToggleIsShow=!0,this.container=e.container,this.linkService=e.linkService,this.outlineItemClass=e.outlineItemClass||"outlineItem",this.outlineToggleClass=e.outlineToggleClass||"outlineItemToggler",this.outlineToggleHiddenClass=e.outlineToggleHiddenClass||"outlineItemsHidden"}return e.prototype={dispose:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.linkService=null},reset:function(){this.outline=null,this.lastToggleIsShow=!0;for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},_dispatchEvent:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e}),this.container.dispatchEvent(t)},_bindLink:function(e,t){var n=this.linkService;if(1==t.custom)e.href=n.getCustomDestinationHash(t.dest),e.onclick=function(e){return n.customNavigateTo(t.dest),!1};else{if(t.url)return void pdfjsLib.addLinkAttributes(e,{url:t.url});e.href=n.getDestinationHash(t.dest),e.onclick=function(e){return n.navigateTo(t.dest),!1}}},_addToggleButton:function(e){var t=document.createElement("div");t.className=this.outlineToggleClass+" "+this.outlineToggleHiddenClass,t.onclick=function(n){if(n.stopPropagation(),t.classList.toggle(this.outlineToggleHiddenClass),n.shiftKey){var i=!t.classList.contains(this.outlineToggleHiddenClass);this._toggleOutlineItem(e,i)}}.bind(this),e.insertBefore(t,e.firstChild)},_toggleOutlineItem:function(e,t){this.lastToggleIsShow=t;for(var n=e.querySelectorAll("."+this.outlineToggleClass),i=0,o=n.length;i<o;++i)n[i].classList[t?"remove":"add"](this.outlineToggleHiddenClass)},toggleOutlineTree:function(){this.outline&&this._toggleOutlineItem(this.container,!this.lastToggleIsShow)},render:function(e){var t=e&&e.outline||null,n=0;if(this.outline&&this.reset(),this.outline=t,t){for(var i=document.createDocumentFragment(),o=[{parent:i,items:this.outline}],a=!1;o.length>0;)for(var s=o.shift(),r=s.custom,l=0,c=s.items.length;l<c;l++){var d=s.items[l],u=document.createElement("div");u.className=this.outlineItemClass;var h=document.createElement("a");if(null==d.custom&&null!=r&&(d.custom=r),this._bindLink(h,d),h.textContent=d.title.replace(/\x00/g,""),u.appendChild(h),d.items&&d.items.length>0){a=!0,this._addToggleButton(u);var p=document.createElement("div");p.className=this.outlineItemClass+"s",u.appendChild(p),o.push({parent:p,custom:d.custom,items:d.items})}s.parent.appendChild(u),n++}a&&(null!=this.container.classList?this.container.classList.add(this.outlineItemClass+"s"):null!=this.container.className&&(this.container.className+=" picWindow")),this.container.appendChild(i),this._dispatchEvent(n)}}},e}(),DFLightBox=function(e){function t(t,n){this.duration=300;var i=this;return i.lightboxWrapper=e("<div>").addClass("df-lightbox-wrapper"),i.container=e("<div>").addClass("df-container").appendTo(i.lightboxWrapper),i.controls=e("<div>").addClass("df-lightbox-controls").appendTo(i.lightboxWrapper),i.closeButton=e("<div>").addClass("df-lightbox-close df-ui-btn").on("click",(function(){i.close(t)})).appendTo(i.controls),i.lightboxWrapper.append(i.container),i}return t.prototype.show=function(t){return 0==this.lightboxWrapper.parent().length&&e("body").append(this.lightboxWrapper),e("html,body").addClass("df-lightbox-open"),this.lightboxWrapper.fadeIn(this.duration,t),this},t.prototype.close=function(t){return this.lightboxWrapper.fadeOut(this.duration),setTimeout(t,this.duration),e("html,body").removeClass("df-lightbox-open"),this},t}(jQuery);DFLIP.Share=function(e){function t(t,n){var i=this,o="<div>",a="df-share-button",s="width=500,height=400";i.isOpen=!1,i.shareUrl="",i.wrapper=e('<div class="df-share-wrapper" style="display: none;">').on("click",(function(e){i.close()})),i.box=e('<div class="df-share-box">').on("click",(function(e){e.preventDefault(),e.stopPropagation()})).appendTo(i.wrapper).html('<span class="df-share-title">'+n.text.share+"</span>"),i.urlInput=e('<textarea class="df-share-url">').on("click",(function(){e(this).select()})),i.facebook=e(o,{class:a+" df-share-facebook "+n.icons.facebook}).on("click",(function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(i.shareUrl),"Sharer",s)})),i.google=e(o,{class:a+" df-share-google "+n.icons.google}).on("click",(function(e){window.open("https://plus.google.com/share?url="+encodeURIComponent(i.shareUrl),"Sharer",s)})),i.twitter=e(o,{class:a+" df-share-twitter "+n.icons.twitter}).on("click",(function(e){window.open("http://twitter.com/share?url="+encodeURIComponent(i.shareUrl),"Sharer",s)})),i.mail=e("<a>",{class:a+" df-share-mail "+n.icons.mail,href:"mailto:?subject="+n.text.mailSubject+"&body="+n.text.mailBody.replace("{{url}}",encodeURIComponent(i.shareUrl)),target:"_blank"}).on("click",(function(t){e(this).attr("href","mailto:?subject="+n.text.mailSubject+"&body="+n.text.mailBody.replace("{{url}}",encodeURIComponent(i.shareUrl))),t.stopPropagation()})),i.box.append(i.urlInput).append(i.facebook).append(i.twitter).append(i.mail),e(t).append(i.wrapper)}return t.prototype.show=function(){this.wrapper.fadeIn(300),this.urlInput.val(this.shareUrl),this.urlInput.trigger("click"),this.isOpen=!0},t.prototype.dispose=function(){var e=this;e.box.off(),e.google.off(),e.twitter.off(),e.facebook.off(),e.mail.off(),e.urlInput.off(),e.wrapper.off().remove()},t.prototype.close=function(){this.wrapper.fadeOut(300),this.isOpen=!1},t.prototype.update=function(e){this.shareUrl=e},t}(jQuery),DFLIP.Popup=function(e){function t(t,n){var i=this;i.isOpen=!1,i.wrapper=e('<div class="df-popup-wrapper" style="display: none;">').on("click",(function(e){i.close()})),i.box=e('<div class="df-popup-box">').on("click",(function(e){e.preventDefault(),e.stopPropagation()})).appendTo(i.wrapper),e(t).append(i.wrapper)}return t.prototype.show=function(){this.wrapper.fadeIn(300),this.isOpen=!0},t.prototype.dispose=function(){this.box.off(),this.wrapper.off().remove()},t.prototype.close=function(){this.wrapper.fadeOut(300),this.isOpen=!1},t}(jQuery);var PDFLinkService=function(){function e(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return e.prototype={dispose:function(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null},setDocument:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)},setViewer:function(e){this.pdfViewer=e,this.externalLinkTarget=e.previewObject.options.linkTarget},setHistory:function(e){this.pdfHistory=e},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},navigateTo:function(e){var t,n="",i=this,o=function(t){var a=t instanceof Object?i._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;a?(i.pdfViewer.contentProvider.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&a>2&&(a=2*a-1),a>i.pdfViewer.pageCount&&(a=i.pdfViewer.pageCount),i.pdfViewer.gotoPage(a),i.pdfHistory&&i.pdfHistory.push({dest:e,hash:n,page:a})):i.pdfDocument.getPageIndex(t).then((function(e){var n=e+1,a=t.num+" "+t.gen+" R";i._pagesRefCache[a]=n,o(t)}))};"string"==typeof e?(n=e,t=this.pdfDocument.getDestination(e)):t=Promise.resolve(e),t.then((function(t){e=t,t instanceof Array&&o(t[0])}))},customNavigateTo:function(e){if(""!=e&&null!=e&&"null"!=e){var t=null;if(isNaN(Math.round(e))){if("string"==typeof e&&(t=parseInt(e.replace("#",""),10),isNaN(t)))return void window.open(e,DFLIP.defaults.linkTarget==DFLIP.LINK_TARGET.SELF?"_self":"_blank")}else t=e;null!=t&&this.pdfViewer.gotoPage(t)}},getDestinationHash:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t=e[0],n=t instanceof Object?this._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;if(n){var i=this.getAnchorUrl("#page="+n),o=e[1];if("object"==typeof o&&"name"in o&&"XYZ"===o.name){var a=e[4]||this.pdfViewer.currentScaleValue,s=parseFloat(a);s&&(a=100*s),i+="&zoom="+a,(e[2]||e[3])&&(i+=","+(e[2]||0)+","+(e[3]||0))}return i}}return this.getAnchorUrl("")},getCustomDestinationHash:function(e){return"#"+escape(e)},getAnchorUrl:function(e){return(this.baseUrl||"")+e},setHash:function(e){if(e.indexOf("=")>=0){var t,n,i=parseQueryString(e);if("nameddest"in i)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(i.nameddest),void this.navigateTo(i.nameddest);if("page"in i&&(t=0|i.page||1),"zoom"in i){var o=i.zoom.split(","),a=o[0],s=parseFloat(a);-1===a.indexOf("Fit")?n=[null,{name:"XYZ"},o.length>1?0|o[1]:null,o.length>2?0|o[2]:null,s?s/100:a]:"Fit"===a||"FitB"===a?n=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?n=[null,{name:a},o.length>1?0|o[1]:null]:"FitR"===a?5!==o.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):n=[null,{name:a},0|o[1],0|o[2],0|o[3],0|o[4]]:console.error("PDFLinkService_setHash: '"+a+"' is not a valid zoom value.")}if(n?this.pdfViewer.scrollPageIntoView(t||this.page,n):t&&(this.page=t),"pagemode"in i){var r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:i.pagemode}),this.pdfViewer.container.dispatchEvent(r)}}else/^\d+$/.test(e)?this.page=e:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(e)),this.navigateTo(unescape(e)))},executeNamedAction:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfViewer.container.dispatchEvent(t)},cachePageRef:function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e}},e}(),FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3},FIND_SCROLL_OFFSET_TOP=-50,FIND_SCROLL_OFFSET_LEFT=-400,CHARACTERS_TO_NORMALIZE={"":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"};DFLIP.PDFFindController=function(){function e(e){this.pdfViewer=e.pdfViewer||null,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();var t=Object.keys(CHARACTERS_TO_NORMALIZE).join("");this.normalizationRegex=new RegExp("["+t+"]","g")}return e.prototype={reset:function(){this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this.firstPagePromise=new Promise(function(e){this.resolveFirstPage=e}.bind(this))},normalize:function(e){return e.replace(this.normalizationRegex,(function(e){return CHARACTERS_TO_NORMALIZE[e]}))},_prepareMatches:function(e,t,n){function i(e,t){var n,i,o;if(n=e[t],o=e[t+1],t<e.length-1&&n.match===o.match)return n.skipped=!0,!0;for(var a=t-1;a>=0;a--)if(!(i=e[a]).skipped){if(i.match+i.matchLength<n.match)break;if(i.match+i.matchLength>=n.match+n.matchLength)return n.skipped=!0,!0}return!1}var o,a;for(e.sort((function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match})),o=0,a=e.length;o<a;o++)i(e,o)||(t.push(e[o].match),n.push(e[o].matchLength))},calcFindPhraseMatch:function(e,t,n){for(var i=[],o=e.length,a=-o;-1!==(a=n.indexOf(e,a+o));)i.push(a);this.pageMatches[t]=i},calcFindWordMatch:function(e,t,n){for(var i,o,a,s=[],r=e.match(/\S+/g),l=0,c=r.length;l<c;l++)for(a=-(o=(i=r[l]).length);-1!==(a=n.indexOf(i,a+o));)s.push({match:a,matchLength:o,skipped:!1});this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[t]=[],this.pageMatches[t]=[],this._prepareMatches(s,this.pageMatches[t],this.pageMatchesLength[t])},calcFindMatch:function(e){var t=this.normalize(this.pageContents[e]),n=this.normalize(this.state.query),i=this.state.caseSensitive,o=this.state.phraseSearch;0!==n.length&&(i||(t=t.toLowerCase(),n=n.toLowerCase()),o?this.calcFindPhraseMatch(n,e,t):this.calcFindWordMatch(n,e,t),this.updatePage(e),this.resumePageIdx===e&&(this.resumePageIdx=null,this.nextPageMatch()),this.pageMatches[e].length>0&&(this.matchCount+=this.pageMatches[e].length,this.updateUIResultsCount()))},extractText:function(){if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents=[];for(var e=[],t=this.pdfViewer.contentProvider.pdfDocument.numPages,n=0;n<t;n++)this.extractTextPromises.push(new Promise((function(t){e.push(t)})));var i=this;!function t(n){i.pdfViewer.getPageTextContent(n).then((function(o){for(var a=o.items,s=[],r=0,l=a.length;r<l;r++)s.push(a[r].str);i.pageContents.push(s.join("")),e[n](n),console.log("extracting Page"+n),n+1<i.pdfViewer.contentProvider.pdfDocument.numPages&&t(n+1)}))}(0)}},executeCommand:function(e,t){null!==this.state&&"findagain"===e||(this.dirtyMatch=!0),this.state=t,this.updateUIState(FindStates.FIND_PENDING),this.firstPagePromise.then(function(){this.extractText(),clearTimeout(this.findTimeout),"find"===e?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()}.bind(this))},updatePage:function(e){this.selected.pageIdx===e&&(this.pdfViewer.currentPageNumber=e+1);var t=this.pdfViewer.getPageView(e);t.textLayer&&t.textLayer.updateMatches()},nextMatch:function(){var e=this.state.findPrevious,t=this.pdfViewer.currentPageNumber-1,n=this.pdfViewer.contentProvider.pageCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=t,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var i=this,o=0;o<n;o++)this.updatePage(o),o in this.pendingFindMatches||(this.pendingFindMatches[o]=!0,this.extractTextPromises[o].then((function(e){delete i.pendingFindMatches[e],i.calcFindMatch(e)})))}if(""!==this.state.query){if(!this.resumePageIdx){var a=this.offset;if(this.pagesToSearch=n,null!==a.matchIdx){var s=this.pageMatches[a.pageIdx].length;if(!e&&a.matchIdx+1<s||e&&a.matchIdx>0)return this.hadMatch=!0,a.matchIdx=e?a.matchIdx-1:a.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(e)}this.nextPageMatch()}}else this.updateUIState(FindStates.FIND_FOUND)},matchesReady:function(e){var t=this.offset,n=e.length,i=this.state.findPrevious;return n?(this.hadMatch=!0,t.matchIdx=i?n-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(i),!!(t.wrapped&&(t.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))},updateMatchPosition:function(e,t,n,i){if(this.selected.matchIdx===t&&this.selected.pageIdx===e){var o={top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT};scrollIntoView(n[i],o,!0)}},nextPageMatch:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");do{var e=this.offset.pageIdx,t=this.pageMatches[e];if(!t){this.resumePageIdx=e;break}}while(!this.matchesReady(t))},advanceOffsetPage:function(e){var t=this.offset,n=this.extractTextPromises.length;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this.pagesToSearch--,(t.pageIdx>=n||t.pageIdx<0)&&(t.pageIdx=e?n-1:0,t.wrapped=!0)},updateMatch:function(e){var t=FindStates.FIND_NOTFOUND,n=this.offset.wrapped;if(this.offset.wrapped=!1,e){var i=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,t=n?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND,-1!==i&&i!==this.selected.pageIdx&&this.updatePage(i)}this.updateUIState(t,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)},updateUIResultsCount:function(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)},updateUIState:function(e,t){this.onUpdateState&&this.onUpdateState(e,t,this.matchCount)}},e}(),DFLIP.TextLayerBuilder=function(){function e(e){this.textLayerDiv=e.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=e.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=e.viewport,this.textDivs=[],this.findController=e.findController||null,this.textLayerRenderTask=null,this.enhanceTextSelection=e.enhanceTextSelection,this._bindMouse()}return e.prototype={_finishRendering:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}},render:function(e){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var t=document.createDocumentFragment();this.textLayerRenderTask=pdfjsLib.renderTextLayer({textContent:this.textContent,container:t,viewport:this.viewport,textDivs:this.textDivs,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(t),this._finishRendering(),this.updateMatches()}.bind(this),(function(e){}))}},setTextContent:function(e){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0},convertMatches:function(e,t){var n=0,i=0,o=this.textContent.items,a=o.length-1,s=null===this.findController?0:this.findController.state.query.length,r=[];if(!e)return r;for(var l=0,c=e.length;l<c;l++){for(var d=e[l];n!==a&&d>=i+o[n].str.length;)i+=o[n].str.length,n++;n===o.length&&console.error("Could not find a matching mapping");var u={begin:{divIdx:n,offset:d-i}};for(d+=t?t[l]:s;n!==a&&d>i+o[n].str.length;)i+=o[n].str.length,n++;u.end={divIdx:n,offset:d-i},r.push(u)}return r},renderMatches:function(e){if(0!==e.length){var t=this.textContent.items,n=this.textDivs,i=null,o=this.pageIdx,a=null!==this.findController&&o===this.findController.selected.pageIdx,s=null===this.findController?-1:this.findController.selected.matchIdx,r={divIdx:-1,offset:void 0},l=s,c=l+1;if(null!==this.findController&&this.findController.state.highlightAll)l=0,c=e.length;else if(!a)return;for(var d=l;d<c;d++){var u=e[d],h=u.begin,p=u.end,g=a&&d===s?" selected":"";if(this.findController&&this.findController.updateMatchPosition(o,d,n,h.divIdx),i&&h.divIdx===i.divIdx?b(i.divIdx,i.offset,h.offset):(null!==i&&b(i.divIdx,i.offset,r.offset),v(h)),h.divIdx===p.divIdx)b(h.divIdx,h.offset,p.offset,"highlight"+g);else{b(h.divIdx,h.offset,r.offset,"highlight begin"+g);for(var f=h.divIdx+1,m=p.divIdx;f<m;f++)n[f].className="highlight middle"+g;v(p,"highlight end"+g)}i=p}i&&b(i.divIdx,i.offset,r.offset)}function v(e,t){var i=e.divIdx;n[i].textContent="",b(i,0,e.offset,t)}function b(e,i,o,a){var s=n[e],r=t[e].str.substring(i,o),l=document.createTextNode(r);if(a){var c=document.createElement("span");return c.className=a,c.appendChild(l),void s.appendChild(c)}s.appendChild(l)}},updateMatches:function(){if(this.renderingDone){for(var e,t,n=this.matches,i=this.textDivs,o=this.textContent.items,a=-1,s=0,r=n.length;s<r;s++){for(var l=n[s],c=Math.max(a,l.begin.divIdx),d=l.end.divIdx;c<=d;c++){var u=i[c];u.textContent=o[c].str,u.className=""}a=l.end.divIdx+1}if(null!==this.findController&&this.findController.active)null!==this.findController&&(e=this.findController.pageMatches[this.pageIdx]||null,t=this.findController.pageMatchesLength&&this.findController.pageMatchesLength[this.pageIdx]||null),this.matches=this.convertMatches(e,t),this.renderMatches(this.matches)}},_bindMouse:function(){var e=this.textLayerDiv,t=this;e.addEventListener("mousedown",(function(n){if(t.enhanceTextSelection&&t.textLayerRenderTask)t.textLayerRenderTask.expandTextDivs(!0);else{var i=e.querySelector(".endOfContent");if(i){var o=n.target!==e;if(o=o&&"none"!==window.getComputedStyle(i).getPropertyValue("-moz-user-select")){var a=e.getBoundingClientRect(),s=Math.max(0,(n.pageY-a.top)/a.height);i.style.top=(100*s).toFixed(2)+"%"}i.classList.add("active")}}})),e.addEventListener("mouseup",(function(n){if(t.enhanceTextSelection&&t.textLayerRenderTask)t.textLayerRenderTask.expandTextDivs(!1);else{var i=e.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}}))}},e}(),DFLIP.ConvertPageLinks=function(){for(var e,t=arguments[0]/100,n=arguments[1]/100,i=function(e,i,o,a,s){return{x:e/t,y:i/n,w:o/t,h:a/n,dest:s}},o=[],a=2;a<arguments.length;a++)e=arguments[a],o[a-2]=i.apply(this,e);return o},DFLIP.parseLinks=function(e){var t;if(null!=e&&e.length>0)for(var n=0;n<e.length;n++)null!=(t=e[n])&&null!=t[0]&&null==t[0].dest&&(t=DFLIP.ConvertPageLinks.apply(this,t),e[n]=t);return e},function(e){function t(e){return"true"==e||1==e}function n(e){null!=e.webgl&&(e.webgl=t(e.webgl)),null!=e.enableDownload&&(e.enableDownload=t(e.enableDownload)),null!=e.search&&(e.search=t(e.search)),null!=e.enableAnalytics&&(e.enableAnalytics=t(e.enableAnalytics)),null!=e.scrollWheel&&(e.scrollWheel=t(e.scrollWheel)),null!=e.autoEnableOutline&&(e.autoEnableOutline=t(e.autoEnableOutline)),null!=e.autoEnableThumbnail&&(e.autoEnableThumbnail=t(e.autoEnableThumbnail)),null!=e.transparent&&(e.transparent=t(e.transparent)),null!=e.overwritePDFOutline&&(e.overwritePDFOutline=t(e.overwritePDFOutline)),null!=e.soundEnable&&(e.soundEnable=t(e.soundEnable)),null!=e.forceFit&&(e.forceFit=t(e.forceFit)),null!=e.enableAnnotation&&(e.enableAnnotation=t(e.enableAnnotation)),null!=e.webglShadow&&(e.webglShadow=t(e.webglShadow)),null!=e.autoPlay&&(e.autoPlay=t(e.autoPlay)),null!=e.autoPlayStart&&(e.autoPlayStart=t(e.autoPlayStart)),null!=e.paddingTop&&(e.paddingTop=parseInt(e.paddingTop,10)),null!=e.paddingRight&&(e.paddingRight=parseInt(e.paddingRight,10)),null!=e.paddingBottom&&(e.paddingBottom=parseInt(e.paddingBottom,10)),null!=e.paddingLeft&&(e.paddingLeft=parseInt(e.paddingLeft,10)),null!=e.zoomRatio&&(e.zoomRatio=parseFloat(e.zoomRatio,10)),null!=e.stiffness&&(e.stiffness=parseFloat(e.stiffness,10)),null!=e.autoPlayDuration&&(e.autoPlayDuration=parseInt(e.autoPlayDuration,10)),null!=e.linkTarget&&(e.linkTarget=parseInt(e.linkTarget,10)),0!=e.pageMode&&"0"!=e.pageMode||(e.pageMode=null),0!=e.singlePageMode&&"0"!=e.singlePageMode||(e.singlePageMode=null)}function i(e){if(1!=e.parsed){e.parsed=!0;var t=[];if(n(e),"undefined"!=typeof dFlipWPGlobal&&"true"==e.wpOptions){try{for(var i in e.links){for(var o=e.links[i],a=[100,100],s=0;s<o.length;s++){for(var r=o[s].substr(1).slice(0,-1).split(","),l=[],c=0;c<5;c++)l[c]=r[c];a.push(l)}t[parseInt(i,10)+1]=a}}catch(e){console.error(e.stack)}e.links=DFLIP.parseLinks(t)}else e.links=DFLIP.parseLinks(e.links)}}DFLIP.getOptions=function(t){var n="option_"+(t=e(t)).attr("id"),o=t.attr("source")||t.attr("df-source");(n=null==n||""==n||null==window[n]?{}:window[n]).source=null==o||""==o?n.source:o;var a={webgl:t.attr("webgl"),height:t.attr("height"),soundEnable:t.attr("sound"),bookTitle:t.data("title"),transparent:t.attr("transparent"),enableDownload:t.attr("download"),search:t.attr("search"),duration:t.attr("duration"),hard:t.attr("hard"),openPage:t.data("page"),pageMode:t.attr("pagemode"),direction:t.attr("direction"),backgroundColor:t.attr("backgroundcolor"),scrollWheel:t.attr("scrollwheel"),backgroundImage:t.attr("backgroundimage"),paddingTop:t.attr("paddingtop"),paddingRight:t.attr("paddingright"),paddingBottom:t.attr("paddingbottom"),paddingLeft:t.attr("paddingleft"),wpOptions:t.attr("wpoptions")};return i(n=e.extend(!0,{},n,a)),n},DFLIP.parseBooks=function(){e("._df_button, ._df_thumb, ._df_custom, ._df_book").each((function(){var t=e(this);if("true"!==(t.attr("parsed")||t.attr("df-parsed")))if(t.attr("df-parsed","true"),t.hasClass("_df_book")){var n=t.attr("id"),i=t.attr("slug"),o=DFLIP.getOptions(t);o.id=n,null!=i&&(o.slug=i),n?window[n.toString()]=e(t).flipBook(o.source,o):e(t).flipBook(o.source,o)}else if(t.hasClass("_df_thumb")){var a=e("<div class='_df_book-cover'>"),s=t.html().trim();t.html("");e("<span class='_df_book-title'>").html(s).appendTo(a);var r=t.attr("thumb")||t.attr("df-thumb"),l=t.attr("thumbtype")||DFLIP.defaults.thumbElement||"div",c=t.attr("tags")||t.attr("df-tags");if(c&&(c=c.split(",")).length>0)for(var d=0;d<c.length;d++)t.append("<span class='_df_book-tag'>"+c[d]+"</span>");null!=r&&""!=r.toString().trim()?"img"==l?(a.append('<img src="'+r+'" alt="'+s+'"/>'),t.attr("thumb-type","img")):a.css({backgroundImage:"url('"+r+"')"}):a.addClass("_df_thumb-not-found"),t.append(a)}}))},e(document).ready((function(){"undefined"==typeof dFlipLocation&&0!=DFLIP.autoDetectLocation&&e("script").each((function(){var t=e(this)[0].src;if((t.indexOf("/dflip.js")>-1||t.indexOf("/dflip.min.js")>-1)&&(t.indexOf("https://")>-1||t.indexOf("http://")>-1)&&t.indexOf("js/dflip.")>-1){var n=t.split("/");window.dFlipLocation=n.slice(0,-2).join("/")}})),"undefined"!=typeof dFlipLocation&&(dFlipLocation.length>2&&"/"!==dFlipLocation.slice(-1)&&(window.dFlipLocation+="/"),DFLIP.defaults.mockupjsSrc=dFlipLocation+"js/libs/mockup.min.js",DFLIP.defaults.pdfjsSrc=dFlipLocation+"js/libs/pdf.min.js",DFLIP.defaults.pdfjsCompatibilitySrc=dFlipLocation+"js/libs/compatibility.js",DFLIP.defaults.threejsSrc=dFlipLocation+"js/libs/three.min.js",DFLIP.defaults.pdfjsWorkerSrc=dFlipLocation+"js/libs/pdf.worker.min.js",DFLIP.defaults.soundFile=dFlipLocation+"sound/turn2.mp3",DFLIP.defaults.imagesLocation=dFlipLocation+"images",DFLIP.defaults.imageResourcesPath=dFlipLocation+"images/pdfjs/",DFLIP.defaults.cMapUrl=dFlipLocation+"js/libs/cmaps/","undefined"!=typeof dFlipWPGlobal&&(n(dFlipWPGlobal),e.extend(!0,DFLIP.defaults,dFlipWPGlobal))),DFLIP.preParseHash=window.location.hash,e("body").on("click","._df_button, ._df_thumb, ._df_custom",(function(t){t.preventDefault();var n=e(this);window.dfLightBox||(window.dfLightBox=new DFLightBox((function(){Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),(function(e){0==window.location.hash.indexOf("#"+e)&&(window.location.hash="#_")})),window.dfActiveLightBoxBook.analytics({eventAction:"Book Closed",options:window.dfActiveLightBoxBook.options}),window.dfActiveLightBoxBook.dispose(),window.dfActiveLightBoxBook=null}))),window.dfLightBox.duration=500,window.dfActiveLightBoxBook&&window.dfActiveLightBoxBook.dispose?window.dfActiveLightBoxBook.dispose():window.dfLightBox.show((function(){var t=DFLIP.getOptions(n);t.transparent=!1,t.height="100%",t.id=n.attr("id");var i=n.attr("slug");null!=i&&(t.slug=i),t.isLightBox=!0,window.dfActiveLightBoxBook=e(window.dfLightBox.container).flipBook(t.source,t)}))})),(DFLIP.utils.isSafari||DFLIP.utils.isIOS)&&e("body").addClass("df-webkit");var t=!1;if(Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),(function(n){if(DFLIP.preParseHash&&DFLIP.preParseHash.indexOf(n)>=0&&!1===t){var i,o=DFLIP.preParseHash.split(n)[1].split("/")[0],a=DFLIP.preParseHash.split(n)[1].split("/")[1];null!=a&&(a=a.split("/")[0]),0==(i=e("[slug="+o+"]")).length&&(i=e("#"+o)),0==i.length&&(i=e("[_slug="+o+"]")),i.length>0&&(null!=a&&i.data("page",a),i.is("._df_button, ._df_thumb, ._df_custom")&&(i.trigger("click"),t=!0))}})),DFLIP.parseBooks(),e("body").hasClass("attachment-pdf")){var i=e("[attachment_pdf_flipbook_lightbox]");i.length>0&&e(i[0]).trigger("click")}e("body").on("click",".df-ui-sidemenu-close",(function(){e(this).closest(".df-container").find(".df-ui-outline.df-active , .df-ui-thumbnail.df-active").trigger("click")}))}))}(jQuery);