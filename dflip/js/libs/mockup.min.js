"use strict";var MOCKUP={VERSION:"1",REVISION:"01"};!function(e){e.__extends=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super=t.prototype,e},e.MODE={PLUGIN:0,BUILDER:1},e.GEOMETRY_TYPE={PLANE:0,BOX:1,MODEL:2},e.MATERIAL_FACE={FRONT:4,BACK:5},e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.Vector3=THREE.Vector3,e.Vector2=THREE.Vector2,e.defaults={anisotropy:8,maxTextureSize:2048,groundTexture:"images/textures/ground-grid.png",textureLoadFallback:"blank"},e.overrideAsTemplate=!1,e.enableLog=!1,e.log=function(){console.log.apply(console,arguments)},e.error=function(){console.error.apply(console,arguments)},e.autoSave=function(){},e.libType="THREE",e.textureLoader=new THREE.TextureLoader,e.paperDefaults={geometryType:e.GEOMETRY_TYPE.PLANE,width:210,height:297,depth:.2,segments:150,widthScale:1,heightScale:1,folds:1,angles:[],backImage:null,frontImage:null,frontBump:null,backBump:null,mipmap:!1,shininess:15,bumpScale:.4,stiffness:.02,color:16777215,skipMaterials:!1,repeat:100,defaultImage:[,,,,"blank","blank"]},e.Paper=function(t){function n(t,n){t=jQuery.extend({},e.paperDefaults,t),this.geometryType=t.geometryType,this.width=t.width,this.widthScale=t.widthScale,this.height=t.height,this.depth=t.depth,this.segments=t.segments,this.folds=t.folds,this.angles=t.angles,this._shininess=t.shininess,this._bumpScale=t.bumpScale,this.stiffness=t.stiffness,this.color=t.color,this.heightScale=t.heightScale,this.defaultImage=t.defaultImage,this.baseType="Paper",this.type="Paper",this.subType=t.subType,null!=t.cloneParent&&(this.cloneParent=t.cloneParent),this.createGeometry(),this.updateGeometry(),t.skipMaterials||1==t.skipLoad&&null!=t.cloneParent||(null!=this.frontImage&&null!=t.defaultImage&&this.frontImage(null!=t.frontImage?t.frontImage:t.defaultImage[e.MATERIAL_FACE.FRONT]),null!=this.backImage&&null!=t.defaultImage&&this.backImage(null!=t.backImage?t.backImage:t.defaultImage[e.MATERIAL_FACE.BACK]),null!=this.frontBump&&this.frontBump(t.frontBump),null!=this.backBump&&this.backBump(t.backBump)),null!=this.bumpScale&&this.bumpScale(t.bumpScale),null!=n&&null!=n.add&&n.add(this)}e.__extends(n,t);var a=function(t,n,a,i){if(t){var r=t.image;t.naturalWidth=r.naturalWidth,t.naturalHeight=r.naturalHeight,t.needsUpdate=!0}null!==t&&"map"==a&&(t.anisotropy=0,e.defaults.anisotropy>0&&(t.anisotropy=e.defaults.anisotropy),1==THREE.skipPowerOfTwo&&(t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter),t.name=(new Date).toTimeString(),null!=n.textureRepeat&&(t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,e.defaults.anisotropy>0&&(t.anisotropy=e.defaults.anisotropy),t.repeat.set(n._textureRepeat,n._textureRepeat),n instanceof e.Ground&&(n.material.bumpMap=t,n.material.bumpScale=n.bumpScale(),n.material.needsUpdate=!0))),n.geometryType==e.GEOMETRY_TYPE.PLANE?(s(n.material[a]),n.material[a]=t,"bumpMap"==a&&(n.material.bumpScale=n.bumpScale())):(s(n.material.materials[i][a]),n.material.materials[i][a]=t,"bumpMap"==a&&(n.material.materials[i].bumpScale=n.bumpScale()),n.material.materials[i].needsUpdate=!0),e.autoSave()},s=function(e){e&&(e.image&&"CANVAS"==e.image.nodeName&&(e.image.remove&&e.image.remove(),delete e.image),e.dispose&&e.dispose(),e=null)},i=function(e){return e instanceof THREE.Object3D&&e.parent instanceof THREE.Object3D?e.parent instanceof THREE.Scene?e.parent:i(e.parent):null};return e.loadImage=function(t,n,s,r,o){if(null==n){var l=t.geometryType==e.GEOMETRY_TYPE.PLANE?null!==t.material[r]?t.material[r].sourceFile:null:null==t.material.materials[s]?null:t.material.materials[s][r]?t.material.materials[s][r].sourceFile:null;return null==l||l.indexOf("data:image")>-1?null:l}1==e.enableLog&&console.log(n);var c=null;if("CANVAS"==n.nodeName||"IMG"==n.nodeName){(c=new THREE.Texture(n)).needsUpdate=!0,a(c,t,r,s),null!=o&&o(t,c);var u=i(t);null!=u&&(u.renderRequestPending=!0)}else"blank"!=n?(c=null==n?null:e.textureLoader.load(n,(function(e){e.sourceFile=n,a(e,t,r,s),null!=o&&o(t,e);var l=i(t);null!=l&&(l.renderRequestPending=!0)}),void 0,(function(a){if(null==c.image)if(null!=t.defaultImage){var i=t.geometryType==e.GEOMETRY_TYPE.PLANE?t.defaultImage[e.MATERIAL_FACE.FRONT]:t.defaultImage[s];n!==i&&null!=i?e.loadImage(t,i,s,r):n===e.defaults.textureLoadFallback&&null!=i||e.loadImage(t,e.defaults.textureLoadFallback,s,r)}else n!==e.defaults.textureLoadFallback&&e.loadImage(t,e.defaults.textureLoadFallback,s,r)})),c&&(c.mapping=THREE.UVMapping)):a(null,t,r,s);return 0},n.prototype.loadImage=function(t,n,a,s){return e.loadImage(this,t,n,a,s)},n.prototype.frontImage=function(t,n){return this.loadImage(t,e.MATERIAL_FACE.FRONT,"map",n)},n.prototype.backImage=function(t,n){return this.loadImage(t,e.MATERIAL_FACE.BACK,"map",n)},n.prototype.frontBump=function(t,n){return this.loadImage(t,e.MATERIAL_FACE.FRONT,"bumpMap",n)},n.prototype.backBump=function(t,n){return this.loadImage(t,e.MATERIAL_FACE.BACK,"bumpMap",n)},n.prototype.bumpScale=function(t){if(null==t)return this._bumpScale;this._bumpScale=t,this.geometryType==e.GEOMETRY_TYPE.PLANE?this.material.bumpScale=t:this.geometryType==e.GEOMETRY_TYPE.BOX&&(this.material.materials[e.MATERIAL_FACE.FRONT].bumpScale=t,this.material.materials[e.MATERIAL_FACE.BACK].bumpScale=t)},n.prototype.shininess=function(t){if(null==t)return this._shininess;this._shininess=t,this.geometryType==e.GEOMETRY_TYPE.PLANE?this.material.shininess=t:this.geometryType==e.GEOMETRY_TYPE.BOX&&(this.material.materials[e.MATERIAL_FACE.FRONT].shininess=t,this.material.materials[e.MATERIAL_FACE.BACK].shininess=t)},n.prototype.bumpImage=function(t){return this.loadImage(t,e.MATERIAL_FACE.FRONT,"bumpMap")},n.prototype.createCopy=function(t){null==t&&(t={},e.getParameter(this,t)),t.type=this.type;var n=e.createObject(t);return n.cloneParent=null,n.copy(this,null),n},n.prototype.createClone=function(t){null==t&&(t={},e.getParameter(this,t)),t.type=this.type;var n=e.createObject(t);return n.material=this.material,n.cloneParent=null!=n.cloneParent?n.cloneParent:this.uuid,n.copy(this,null),n},n.prototype.createGeometry=function(){var n={color:this.color,shading:THREE.SmoothShading,shininess:this._shininess},a=new THREE.MeshPhongMaterial(n);if(this.geometryType==e.GEOMETRY_TYPE.BOX){var s=[a,a,a,a,new THREE.MeshPhongMaterial(n),new THREE.MeshPhongMaterial(n)];t.call(this,new THREE.BoxGeometry(this.width,this.height,this.depth,this.segments*this.folds,1,1),new THREE.MeshFaceMaterial(s))}else this.geometryType==e.GEOMETRY_TYPE.PLANE&&t.call(this,new THREE.PlaneBufferGeometry(this.width,this.height),a)},n.prototype.updateGeometry=function(){},n}(THREE.Mesh)}(MOCKUP||(MOCKUP={})),function(e){e.selected=null,e.Stage=function(t){function n(n){n=n||{};var a=this;if(a.postRender=null,t.call(a),!0!==n.skipLoad){a.canvas=n.canvas||document.createElement("canvas"),a.canvas=jQuery(this.canvas),a.camera=new THREE.PerspectiveCamera(30,a.width/a.height,4,5e4),a.renderer=new THREE.WebGLRenderer({canvas:a.canvas[0],antialias:!0,alpha:!0}),a.renderer.setPixelRatio(n.pixelRatio),a.renderer.setSize(a.width,a.height),a.renderer.setClearColor(16777215,0),(a.orbitControl=new THREE.OrbitControls(a.camera,a.renderer.domElement)).maxPolarAngle=Math.PI,e.mode!==e.MODE.PLUGIN&&(a.renderer.shadowMap.enabled=!0,a.ground=new e.Ground({color:15658734,height:a.camera.far,width:a.camera.far},a)),a.ambientLight=new THREE.AmbientLight(4473924),a.add(a.ambientLight);var s=a.spotLight=new THREE.DirectionalLight(16777215,.5);if(s.position.set(0,1,0),0!=n.webglShadow&&(s.castShadow=!0,s.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(70,1,200,2e3)),s.shadow.bias=-222e-6,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024),s.intensity=.6,s.shadow){var i=a.spotLightHelper=new THREE.CameraHelper(s.shadow.camera);i.visible=!1,a.add(s),a.add(i)}if(1==n.stats){var r=a.stats=new Stats;r.domElement.style.position="absolute",r.domElement.style.top="60px",a.canvas.parent().append(jQuery(r.domElement))}a.enableSoftShadow(!1),a.animateCount=0,a.renderCount=0,a.camera.position.set(-300,300,300),a.camera.lookAt(new THREE.Vector3(0,0,0)),a.orbitControl.center.set(0,0,0),a.orbitControl.update(),a.selectiveRendering=!1,a.renderRequestPending=!1,o()}function o(){o&&requestAnimationFrame(o),(1!=a.selectiveRendering||1==a.selectiveRendering&&1==a.renderRequestPending)&&a.render()}this.type="Stage",a.cancelRAF=function(){cancelAnimationFrame(o),o=null}}return e.__extends(n,t),n.prototype.enableSoftShadow=function(e){if(null!=this.spotLight.shadow){e=null!=e&&e;var t=this.renderer.shadowMap.type;this.renderer.shadowMap.type=THREE.PCFShadowMap;var n=this.spotLight;if(n.shadow.map){if(t==this.renderer.shadowMap.type)return;n.shadow.map.dispose(),n.shadow.map=null}var a=e?4096:1024;n.shadow.mapSize.width=a,n.shadow.mapSize.height=a,n.shadow.bias=e?-875e-8:-5e-5,this.clearMaterials(),this.renderRequestPending=!0}},n.prototype.clearMaterials=function(){for(var e=this.children.length-1;e>=0;e--){var t=this.children[e];if(t.baseType&&"Paper"==t.baseType&&t.material)if(null!=t.material.materials)for(var n=0;n<t.material.materials.length;n++)t.material.materials[n].needsUpdate=!0;else t.material.needsUpdate=!0}},n.prototype.clearChild=function(){this.spotLight.shadow.map&&(this.spotLight.shadow.map.dispose(),this.spotLight.shadow.map=null),this.spotLight.castShadow=!1,this.clearMaterials();for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];if(n instanceof e.Bundle)for(var a=n.children.length-1;a>=0;a--)e.clearChild(n.children[a]);e.clearChild(n),n=null}this.render()},n.prototype.resizeAuto=function(){this.resizeCanvas(this.canvas.parent().width(),this.canvas.parent().height())},n.prototype.resizeCanvas=function(e,t){this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderRequestPending=!0,null!=this.resizeCallback&&this.resizeCallback()},n.prototype.render=function(){this.animateCount++,this.renderer.render(this,this.camera),null!=this.stats&&this.stats.update(),this.renderRequestPending=!1,null!=this.renderCallback&&this.renderCallback()},n.prototype.toJSON=function(){var t={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},n={},a=function(e){if(null==t.geometries&&(t.geometries=[]),null==n[e.uuid]){var a=e.toJSON();delete a.metadata,n[e.uuid]=a,t.geometries.push(a)}return e.uuid},s={},i=function(e){if(null==t.materials&&(t.materials=[]),null==s[e.uuid]){var n=e.toJSON();delete n.metadata,s[e.uuid]=n,t.materials.push(n)}return e.uuid},r=function(t){var n={};if(n.uuid=t.uuid,n.type=t.type,""!==t.name&&(n.name=t.name),"{}"!==JSON.stringify(t.userData)&&(n.userData=t.userData),!0!==t.visible&&(n.visible=t.visible),e.getParameter(t,n),t instanceof THREE.PerspectiveCamera?(n.fov=t.fov,n.aspect=t.aspect,n.near=t.near,n.far=t.far):t instanceof THREE.OrthographicCamera?(n.left=t.left,n.right=t.right,n.top=t.top,n.bottom=t.bottom,n.near=t.near,n.far=t.far):t instanceof THREE.AmbientLight?n.color=t.color.getHex():t instanceof THREE.DirectionalLight?(n.color=t.color.getHex(),n.intensity=t.intensity):t instanceof THREE.PointLight?(n.color=t.color.getHex(),n.intensity=t.intensity,n.distance=t.distance,n.decay=t.decay):t instanceof THREE.SpotLight?(n.radius=t.radius,n.color=t.color.getHex(),n.intensity=t.intensity,n.distance=t.distance,n.angle=t.angle,n.exponent=t.exponent,n.decay=t.decay):t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.PointCloud?t instanceof e.Iphone||(n.geometry=a(t.geometry),n.material=i(t.material),t instanceof THREE.Line&&(n.mode=t.mode)):t instanceof THREE.Sprite&&(n.material=i(t.material)),n.matrix=t.matrix.toArray(),t.children.length>0){n.children=[];for(var s=0;s<t.children.length;s++){var o=t.children[s];o instanceof THREE.TransformControls||o instanceof THREE.BoxHelper||t instanceof e.Bundle||n.children.push(r(t.children[s]))}}return n};return t.object=r(this),t},n.prototype.hasChild=function(){for(var e=this.children,t=!1,n=0;n<this.children.length;n++)if("Paper"==e[n].baseType&&"Ground"!==e[n].type){t=!0;break}return t},n}(THREE.Scene),e.getParameter=function(t,n){null!=t.subType&&(n.subType=t.subType),null!=t.height&&(n.height=t.height),null!=t.width&&(n.width=t.width),null!=t.depth&&(n.depth=t.depth),null!=t.radius&&(n.radius=t.radius),null!=t.segments&&(n.segments=t.segments),null!=t.folds&&(n.folds=t.folds),null!=t.angles&&(n.angles=t.angles),null!=t.shininess&&(n.shininess=t.shininess()),null!=t.bumpScale&&(n.bumpScale=t.bumpScale()),null!=t.stiffness&&(n.stiffness=t.stiffness),null!=t.heightScale&&(n.heightScale=t.heightScale),null!=t.widthScale&&(n.widthScale=t.widthScale),null!=t.frontImage&&(n.frontImage=t.frontImage()),null!=t.backImage&&(n.backImage=t.backImage()),null!=t.backBump&&(n.backBump=t.backBump()),null!=t.frontBump&&(n.frontBump=t.frontBump()),null!=t.cloneParent&&(n.cloneParent=t.cloneParent),null!=t.textureRepeat&&(n.textureRepeat=t.textureRepeat()),null!=t.resolutionHeight&&(n.resolutionHeight=t.resolutionHeight),null!=t.resolutionWidth&&(n.resolutionWidth=t.resolutionWidth),null!=t.screenSize&&(n.screenSize=t.screenSize),1==e.overrideAsTemplate&&(e.getDefaultImage(n),null!=n.defaultImage&&(null!=t.frontImage&&(n.frontImage=n.defaultImage[4]),null!=t.backImage&&(n.backImage=n.defaultImage[5])))},e.getDefaultImage=function(t){null==t.defaultImage&&null!=e.presets[t.type]&&null!=e.presets[t.type].options&&(t.defaultImage=e.presets[t.type].options.defaultImage,null!=t.subType&&null!=e.presets[t.type].menu&&null!=e.presets[t.type].menu.subMenu&&null!=e.presets[t.type].menu.subMenu[t.subType]&&null!=e.presets[t.type].menu.subMenu[t.subType].options.defaultImage&&(t.defaultImage=e.presets[t.type].menu.subMenu[t.subType].options.defaultImage))},e.createObject=function(t){null==t.defaultImage&&null!=e.presets&&null!=e.presets[t.type]&&null!=e.presets[t.type].options&&(t.defaultImage=e.presets[t.type].options.defaultImage,null!=t.subType&&null!=e.presets[t.type].menu&&null!=e.presets[t.type].menu.subMenu&&null!=e.presets[t.type].menu.subMenu[t.subType]&&null!=e.presets[t.type].menu.subMenu[t.subType].options.defaultImage&&(t.defaultImage=e.presets[t.type].menu.subMenu[t.subType].options.defaultImage));var n=new e[t.type](t);return null!=t.cloneParent&&(n.cloneParent=t.cloneParent),n}}(MOCKUP||(MOCKUP={})),function(e){var t=function(t){function n(n,a){(n=n||{}).geometryType=e.GEOMETRY_TYPE.PLANE,t.call(this,n,a),this.type="PlanePaper"}return e.__extends(n,t),n.prototype.backImage=null,n.prototype.backBump=null,n}(e.Paper);e.PlanePaper=t;var n=function(t){function n(n,a){(n=n||{}).geometryType=e.GEOMETRY_TYPE.BOX,t.call(this,n,a),this.type="BoxPaper",this.castShadow=!0,this.receiveShadow=!0}return e.__extends(n,t),n.prototype.updateGeometry=function(){},n}(e.Paper);e.BoxPaper=n;var a=function(t){function n(e,n){e=e||{},t.call(this,e,n);for(var a=0;a<6;a++)this.angles[a]=null!=this.angles[a]?this.angles[a]:0;this.updateAngle(),this.type="FoldBoxPaper"}return e.__extends(n,t),n.prototype.updateGeometry=function(){},n.prototype.updateAngle=function(t){var n=this,a=(performance.now(),n.width*(1-Math.sin(n.stiffness/2*(n.stiffness/2))/2)-n.width*n.stiffness/20),s=(n.height,n.segments),i=n.folds,r=n.stiffness,o=a/2,l=a/i,c=l*r,u=l,h=[],p=[],m=[],d=[],E=[],f=[],g=0,v=n.depth,T=(Math.PI,n.angles[4]||0),y=3==i?u/200:0,M=0,x=0,R=[];R.push(x);!function(){if(n.folds>=1){E[0]=[],f[i-1]=[],g=n.angles[1]*Math.PI/180,T=n.angles[4]*Math.PI/180;Math.sin(T);E[0][0]=E[0][1]=1==n.folds?new THREE.Vector3(-u*Math.cos(g),0,Math.sin(g)*u):new THREE.Vector3(u-o-u*Math.cos(g),0,Math.sin(g)*u),M=(n.angles[1]-90)*Math.PI/180,g=M,f[i-1][2]=f[i-1][3]=new THREE.Vector3(E[0][0].x-Math.cos(g)*v,0,E[0][0].z+Math.sin(g)*v),1==n.folds&&(E[0][1]=new THREE.Vector3(-u/2*Math.cos(T),0,u/2*Math.sin(T)),f[i-1][2]=new THREE.Vector3(E[0][1].x-Math.cos(M)*v,0,E[0][1].z+Math.sin(M)*v)),g=(45+n.angles[1]/2)*Math.PI/180,n.folds>1&&(g=2==n.folds?(45+n.angles[1]/4-n.angles[4]/2)*Math.PI/180:(45+n.angles[1]/4)*Math.PI/180),E[0][2]=1==n.folds?new THREE.Vector3(-Math.cos(g)*c/2,0,Math.sin(g)*c):new THREE.Vector3(u-o-y-Math.cos(g)*c/2,0,Math.sin(g)*c),f[i-1][1]=1==n.folds?new THREE.Vector3(E[0][2].x-Math.cos(M)*v,0,E[0][2].z+Math.sin(M)*v):E[0][2],E[0][3]=1==n.folds?new THREE.Vector3(0,0,0):new THREE.Vector3(u-o-y,0,0),g=2==n.folds?(n.angles[1]/2-n.angles[4]/2-90)*Math.PI/180:1==n.folds?(n.angles[1]-90)*Math.PI/180:(n.angles[1]/2-90)*Math.PI/180,f[i-1][0]=new THREE.Vector3(E[0][3].x-Math.cos(g)*v,0,E[0][3].z+Math.sin(g)*v)}n.folds>=2&&(E[1]=[],f[i-2]=[],E[1][0]=E[0][3],f[i-2][3]=f[i-1][0],g=(135+3*n.angles[1]/4)*Math.PI/180,E[1][1]=new THREE.Vector3(u-o-Math.cos(g)*c,0,Math.sin(g)*c),f[i-2][2]=E[1][1],g=0,n.folds>2?(g=(45-3*n.angles[4]/4)*Math.PI/180,E[1][2]=new THREE.Vector3(2*u-o+y-Math.cos(g)*c,0,Math.sin(g)*c),f[i-2][1]=E[1][2],E[1][3]=new THREE.Vector3(2*u-o+y,0,0),g=(n.angles[4]/2-90)*Math.PI/180,f[i-2][0]=new THREE.Vector3(E[1][3].x+Math.cos(g)*v*1.25,0,E[1][3].z+Math.sin(g)*v*1.25)):(g=(135-n.angles[4]/4+n.angles[1]/2)*Math.PI/180,E[1][1]=new THREE.Vector3(u-o-Math.cos(g)*c/2,0,Math.sin(g)*c),f[0][2]=E[1][1],g=(180-n.angles[4])*Math.PI/180,E[1][2]=E[1][3]=new THREE.Vector3(u-o-Math.cos(g)*u,0,Math.sin(g)*u),g=(n.angles[4]-90)*Math.PI/180,f[0][0]=f[0][1]=new THREE.Vector3(E[1][3].x+Math.cos(g)*v,0,E[1][3].z+Math.sin(g)*v))),n.folds>2&&(E[2]=[],f[0]=[],E[2][0]=E[1][3],f[0][3]=f[1][0],g=(135-1*n.angles[4]/4)*Math.PI/180,E[2][1]=new THREE.Vector3(2*u-o-0*Math.cos(g),0,Math.sin(g)*c),f[0][2]=E[2][1],g=(180-n.angles[4])*Math.PI/180,E[2][2]=E[2][3]=new THREE.Vector3(2*u-o-Math.cos(g)*u,0,Math.sin(g)*u),g=(n.angles[4]-90)*Math.PI/180,f[0][0]=f[0][1]=new THREE.Vector3(E[2][3].x+Math.cos(g)*v,0,E[2][3].z+Math.sin(g)*v));for(var e=0;e<n.folds;e++){h[e]=new THREE.CubicBezierCurve3(E[e][0],E[e][1],E[e][2],E[e][3]),m[e]=h[e].getPoints(n.segments);for(var t,a=m[e][0],s=1;s<m[e].length;s++)t=m[e][s],x+=t.distanceTo(a),R.push(x),a=t;p[e]=new THREE.CubicBezierCurve3(f[e][0],f[e][1],f[e][2],f[e][3]),d[e]=p[e].getPoints(n.segments)}}();var b=n.geometry,P=i*s+1,H=8;b.vertices[0].z=b.vertices[2].z=b.vertices[H+2*P-1].z=b.vertices[H+3*P-1].z=b.vertices[H+5*P-1].z=b.vertices[H+6*P-1].z=m[i-1][s].z,b.vertices[0].x=b.vertices[2].x=b.vertices[H+2*P-1].x=b.vertices[H+3*P-1].x=b.vertices[H+5*P-1].x=b.vertices[H+6*P-1].x=m[i-1][s].x,b.vertices[1].z=b.vertices[3].z=b.vertices[H+P-1].z=b.vertices[H+4*P-1].z=b.vertices[H+6*P].z=b.vertices[H+7*P].z=d[0][0].z,b.vertices[1].x=b.vertices[3].x=b.vertices[H+P-1].x=b.vertices[H+4*P-1].x=b.vertices[H+6*P].x=b.vertices[H+7*P].x=d[0][0].x,b.vertices[5].z=b.vertices[7].z=b.vertices[H+P].z=b.vertices[H+2*P].z=b.vertices[H+4*P].z=b.vertices[H+5*P].z=m[0][0].z,b.vertices[5].x=b.vertices[7].x=b.vertices[H+P].x=b.vertices[H+2*P].x=b.vertices[H+4*P].x=b.vertices[H+5*P].x=m[0][0].x,b.vertices[4].z=b.vertices[6].z=b.vertices[H].z=b.vertices[H+3*P].z=b.vertices[H+7*P-1].z=b.vertices[H+8*P-1].z=d[i-1][s].z,b.vertices[4].x=b.vertices[6].x=b.vertices[H].x=b.vertices[H+3*P].x=b.vertices[H+7*P-1].x=b.vertices[H+8*P-1].x=d[i-1][s].x;var w=b.vertices.length;H++;for(var I=0;I<i;I++)for(var S=0==I,z=S?s-1:s,O=0;O<z;O++)b.vertices[H].z=b.vertices[H+3*P].z=b.vertices[w-H+7-P].z=b.vertices[w-H+7].z=d[i-1-I][z-O].z,b.vertices[H].x=b.vertices[H+3*P].x=b.vertices[w-H+7-P].x=b.vertices[w-H+7].x=d[i-1-I][z-O].x,b.vertices[H+P].z=b.vertices[H+2*P].z=b.vertices[H+4*P].z=b.vertices[H+5*P].z=m[I][O+S].z,b.vertices[H+P].x=b.vertices[H+2*P].x=b.vertices[H+4*P].x=b.vertices[H+5*P].x=m[I][O+S].x,H++;var A=b.faceVertexUvs[0],C=b.faces,L=0;for(O=0;O<A.length;O++)if(C[O].materialIndex==e.MATERIAL_FACE.FRONT){var N=R[L]/x;O%2==0?(A[O][0].x=A[O][1].x=A[O+1][0].x=N,L++):A[O-1][2].x=A[O][1].x=A[O][2].x=N}else if(C[O].materialIndex==e.MATERIAL_FACE.BACK){N=1-R[L]/x;O%2==0?(A[O][0].x=A[O][1].x=A[O+1][0].x=N,L--):A[O-1][2].x=A[O][1].x=A[O][2].x=N}b.computeBoundingBox();var V=Math.abs(b.boundingBox.min.x-b.boundingBox.max.x),k=Math.abs(b.boundingBox.min.z-b.boundingBox.max.z);Math.sqrt(V*V+k*k);n.scale.x=n.scale.z=u*n.folds/x,b.computeBoundingSphere(),b.verticesNeedUpdate=!0,b.computeFaceNormals(),b.computeVertexNormals(),b.uvsNeedUpdate=!0,b.normalsNeedUpdate=!0,h.forEach((function(e){null})),p.forEach((function(e){null})),d.forEach((function(e){null})),m.forEach((function(e){null}))},n}(e.BoxPaper);e.FlexBoxPaper=a;a=function(t){function n(e,n){e=e||{},t.call(this,e,n);for(var a=0;a<6;a++)this.angles[a]=null!=this.angles[a]?this.angles[a]:0;this.updateAngle(),this.type="FoldBoxPaper"}return e.__extends(n,t),n.prototype.updateGeometry=function(){},n.prototype.updateAngle=function(t){var n=this,a=(performance.now(),n.width*(1-Math.sin(n.stiffness/2*(n.stiffness/2))/2)-n.width*n.stiffness/20),s=(n.height,n.segments),i=n.folds,r=n.stiffness,o=a/2,l=a/i,c=l*r,u=l,h=[],p=[],m=[],d=[],E=[],f=[],g=0,v=n.depth,T=(Math.PI,n.angles[4]||0),y=3==i?u/200:0,M=0,x=0,R=[];R.push(x);!function(){if(n.folds>=1){E[0]=[],f[i-1]=[],g=n.angles[1]*Math.PI/180,T=n.angles[4]*Math.PI/180;Math.sin(T);E[0][0]=E[0][1]=1==n.folds?new THREE.Vector3(-u*Math.cos(g),0,Math.sin(g)*u):new THREE.Vector3(u-o-u*Math.cos(g),0,Math.sin(g)*u),M=(n.angles[1]-90)*Math.PI/180,g=M,f[i-1][2]=f[i-1][3]=new THREE.Vector3(E[0][0].x-Math.cos(g)*v,0,E[0][0].z+Math.sin(g)*v),1==n.folds&&(E[0][1]=new THREE.Vector3(-u/2*Math.cos(T),0,u/2*Math.sin(T)),f[i-1][2]=new THREE.Vector3(E[0][1].x-Math.cos(M)*v,0,E[0][1].z+Math.sin(M)*v)),g=(45+n.angles[1]/2)*Math.PI/180,n.folds>1&&(g=2==n.folds?(45+n.angles[1]/4-n.angles[4]/2)*Math.PI/180:(45+n.angles[1]/4)*Math.PI/180),E[0][2]=1==n.folds?new THREE.Vector3(-Math.cos(g)*c/2,0,Math.sin(g)*c):new THREE.Vector3(u-o-y-Math.cos(g)*c/2,0,Math.sin(g)*c),f[i-1][1]=1==n.folds?new THREE.Vector3(E[0][2].x-Math.cos(M)*v,0,E[0][2].z+Math.sin(M)*v):E[0][2],E[0][3]=1==n.folds?new THREE.Vector3(0,0,0):new THREE.Vector3(u-o-y,0,0),g=2==n.folds?(n.angles[1]/2-n.angles[4]/2-90)*Math.PI/180:1==n.folds?(n.angles[1]-90)*Math.PI/180:(n.angles[1]/2-90)*Math.PI/180,f[i-1][0]=new THREE.Vector3(E[0][3].x-Math.cos(g)*v,0,E[0][3].z+Math.sin(g)*v)}n.folds>=2&&(E[1]=[],f[i-2]=[],E[1][0]=E[0][3],f[i-2][3]=f[i-1][0],g=(135+3*n.angles[1]/4)*Math.PI/180,E[1][1]=new THREE.Vector3(u-o-Math.cos(g)*c,0,Math.sin(g)*c),f[i-2][2]=E[1][1],g=0,n.folds>2?(g=(45-3*n.angles[4]/4)*Math.PI/180,E[1][2]=new THREE.Vector3(2*u-o+y-Math.cos(g)*c,0,Math.sin(g)*c),f[i-2][1]=E[1][2],E[1][3]=new THREE.Vector3(2*u-o+y,0,0),g=(n.angles[4]/2-90)*Math.PI/180,f[i-2][0]=new THREE.Vector3(E[1][3].x+Math.cos(g)*v*1.25,0,E[1][3].z+Math.sin(g)*v*1.25)):(g=(135-n.angles[4]/4+n.angles[1]/2)*Math.PI/180,E[1][1]=new THREE.Vector3(u-o-Math.cos(g)*c/2,0,Math.sin(g)*c),f[0][2]=E[1][1],g=(180-n.angles[4])*Math.PI/180,E[1][2]=E[1][3]=new THREE.Vector3(u-o-Math.cos(g)*u,0,Math.sin(g)*u),g=(n.angles[4]-90)*Math.PI/180,f[0][0]=f[0][1]=new THREE.Vector3(E[1][3].x+Math.cos(g)*v,0,E[1][3].z+Math.sin(g)*v))),n.folds>2&&(E[2]=[],f[0]=[],E[2][0]=E[1][3],f[0][3]=f[1][0],g=(135-1*n.angles[4]/4)*Math.PI/180,E[2][1]=new THREE.Vector3(2*u-o-0*Math.cos(g),0,Math.sin(g)*c),f[0][2]=E[2][1],g=(180-n.angles[4])*Math.PI/180,E[2][2]=E[2][3]=new THREE.Vector3(2*u-o-Math.cos(g)*u,0,Math.sin(g)*u),g=(n.angles[4]-90)*Math.PI/180,f[0][0]=f[0][1]=new THREE.Vector3(E[2][3].x+Math.cos(g)*v,0,E[2][3].z+Math.sin(g)*v));for(var e=0;e<n.folds;e++){h[e]=new THREE.CubicBezierCurve3(E[e][0],E[e][1],E[e][2],E[e][3]),m[e]=h[e].getPoints(n.segments);for(var t,a=m[e][0],s=1;s<m[e].length;s++)t=m[e][s],x+=t.distanceTo(a),R.push(x),a=t;p[e]=new THREE.CubicBezierCurve3(f[e][0],f[e][1],f[e][2],f[e][3]),d[e]=p[e].getPoints(n.segments)}}();var b=n.geometry,P=i*s+1,H=8;b.vertices[0].z=b.vertices[2].z=b.vertices[H+2*P-1].z=b.vertices[H+3*P-1].z=b.vertices[H+5*P-1].z=b.vertices[H+6*P-1].z=m[i-1][s].z,b.vertices[0].x=b.vertices[2].x=b.vertices[H+2*P-1].x=b.vertices[H+3*P-1].x=b.vertices[H+5*P-1].x=b.vertices[H+6*P-1].x=m[i-1][s].x,b.vertices[1].z=b.vertices[3].z=b.vertices[H+P-1].z=b.vertices[H+4*P-1].z=b.vertices[H+6*P].z=b.vertices[H+7*P].z=d[0][0].z,b.vertices[1].x=b.vertices[3].x=b.vertices[H+P-1].x=b.vertices[H+4*P-1].x=b.vertices[H+6*P].x=b.vertices[H+7*P].x=d[0][0].x,b.vertices[5].z=b.vertices[7].z=b.vertices[H+P].z=b.vertices[H+2*P].z=b.vertices[H+4*P].z=b.vertices[H+5*P].z=m[0][0].z,b.vertices[5].x=b.vertices[7].x=b.vertices[H+P].x=b.vertices[H+2*P].x=b.vertices[H+4*P].x=b.vertices[H+5*P].x=m[0][0].x,b.vertices[4].z=b.vertices[6].z=b.vertices[H].z=b.vertices[H+3*P].z=b.vertices[H+7*P-1].z=b.vertices[H+8*P-1].z=d[i-1][s].z,b.vertices[4].x=b.vertices[6].x=b.vertices[H].x=b.vertices[H+3*P].x=b.vertices[H+7*P-1].x=b.vertices[H+8*P-1].x=d[i-1][s].x;var w=b.vertices.length;H++;for(var I=0;I<i;I++)for(var S=0==I,z=S?s-1:s,O=0;O<z;O++)b.vertices[H].z=b.vertices[H+3*P].z=b.vertices[w-H+7-P].z=b.vertices[w-H+7].z=d[i-1-I][z-O].z,b.vertices[H].x=b.vertices[H+3*P].x=b.vertices[w-H+7-P].x=b.vertices[w-H+7].x=d[i-1-I][z-O].x,b.vertices[H+P].z=b.vertices[H+2*P].z=b.vertices[H+4*P].z=b.vertices[H+5*P].z=m[I][O+S].z,b.vertices[H+P].x=b.vertices[H+2*P].x=b.vertices[H+4*P].x=b.vertices[H+5*P].x=m[I][O+S].x,H++;var A=b.faceVertexUvs[0],C=b.faces,L=0;for(O=0;O<A.length;O++)if(C[O].materialIndex==e.MATERIAL_FACE.FRONT){var N=R[L]/x;O%2==0?(A[O][0].x=A[O][1].x=A[O+1][0].x=N,L++):A[O-1][2].x=A[O][1].x=A[O][2].x=N}else if(C[O].materialIndex==e.MATERIAL_FACE.BACK){N=1-R[L]/x;O%2==0?(A[O][0].x=A[O][1].x=A[O+1][0].x=N,L--):A[O-1][2].x=A[O][1].x=A[O][2].x=N}b.computeBoundingBox();var V=Math.abs(b.boundingBox.min.x-b.boundingBox.max.x),k=Math.abs(b.boundingBox.min.z-b.boundingBox.max.z);Math.sqrt(V*V+k*k);n.scale.x=n.scale.z=u*n.folds/x,b.computeBoundingSphere(),b.verticesNeedUpdate=!0,b.computeFaceNormals(),b.computeVertexNormals(),b.uvsNeedUpdate=!0,b.normalsNeedUpdate=!0,h.forEach((function(e){null})),p.forEach((function(e){null})),d.forEach((function(e){null})),m.forEach((function(e){null}))},n}(e.BoxPaper);e.FlexBoxPaper=a;var s=function(t){function n(e,n){e=e||{},t.call(this),this.type="Bundle",null!=n&&n.add(this)}return e.__extends(n,t),n}(THREE.Group);e.Bundle=s}(MOCKUP||(MOCKUP={})),function(e){var t=function(t){function n(n,a){n=n||{};this._textureRepeat=null==n.textureRepeat?50:n.textureRepeat,n.skipMaterials=!0,n.bumpScale=null==n.bumpScale?.1:n.bumpScale,n.shininess=null==n.shininess?0:n.shininess,t.call(this,n,a),this.receiveShadow=!0,this.angles=null,this.frontImage(null==n.frontImage?e.defaults.groundTexture:n.frontImage),this.type="Ground"}return e.__extends(n,t),n.prototype.frontImage=function(e){if(null==e)return n.__super.frontImage.call(this,e);n.__super.frontImage.call(this,e)},e.PlanePaper.prototype.frontBump=null,n.prototype.textureRepeat=function(e){if(null==e)return this._textureRepeat;this._textureRepeat=e,null!==this.material.map&&this.material.map.repeat.set(e,e)},n}(e.PlanePaper);e.Ground=t}(MOCKUP||(MOCKUP={})),MOCKUP.inchTomm=function(e){return 25.4*e},MOCKUP.mmToInch=function(e){return e/25.4},MOCKUP.clearChild=function(e){var t,n=e.material;if(e.parent.remove(e),null!=e.dispose&&e.dispose(),null!=e.geometry&&e.geometry.dispose(),null!=n){if(null==n.materials)n.map&&(t=n.map,n.dispose(),t.dispose()),n.bumpMap&&(t=n.bumpMap,n.dispose(),t.dispose());else for(var a=0;a<n.materials.length;a++)n.materials[a]&&(n.materials[a].map&&(t=n.materials[a].map,n.materials[a].dispose(),t.dispose()),n.materials[a].bumpMap&&(t=n.materials[a].bumpMap,n.materials[a].dispose(),t.dispose())),n.materials[a]=null;n=null,t=null}},THREE.OrbitControls=function(e,t){this.object=e,this.domElement=null!=t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var n,a,s=this,i=1e-6,r=new THREE.Vector2,o=new THREE.Vector2,l=new THREE.Vector2,c=new THREE.Vector2,u=new THREE.Vector2,h=new THREE.Vector2,p=new THREE.Vector3,m=new THREE.Vector3,d=new THREE.Vector2,E=new THREE.Vector2,f=new THREE.Vector2,g=0,v=0,T=1,y=new THREE.Vector3,M=new THREE.Vector3,x=new THREE.Quaternion,R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},b=R.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var P=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),H=P.clone().inverse(),w={type:"change"},I={type:"start"},S={type:"end"};function z(){return 2*Math.PI/60/60*s.autoRotateSpeed}function O(){return Math.pow(.95,s.zoomSpeed)}function A(e){if(!1!==s.enabled){if(e.preventDefault(),e.button===s.mouseButtons.ORBIT){if(!0===s.noRotate)return;b=R.ROTATE,r.set(e.clientX,e.clientY)}else if(e.button===s.mouseButtons.ZOOM){if(!0===s.noZoom)return;b=R.DOLLY,d.set(e.clientX,e.clientY)}else if(e.button===s.mouseButtons.PAN){if(!0===s.noPan)return;b=R.PAN,c.set(e.clientX,e.clientY)}b!==R.NONE&&(document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",L,!1),document.addEventListener("mouseout",L,!1),s.dispatchEvent(I))}}function C(e){if(!1!==s.enabled){e.preventDefault();var t=s.domElement===document?s.domElement.body:s.domElement;if(b===R.ROTATE){if(!0===s.noRotate)return;o.set(e.clientX,e.clientY),l.subVectors(o,r),s.rotateLeft(2*Math.PI*l.x/t.clientWidth*s.rotateSpeed),s.rotateUp(2*Math.PI*l.y/t.clientHeight*s.rotateSpeed),r.copy(o)}else if(b===R.DOLLY){if(!0===s.noZoom)return;E.set(e.clientX,e.clientY),f.subVectors(E,d),f.y>0?s.dollyIn():f.y<0&&s.dollyOut(),d.copy(E)}else if(b===R.PAN){if(!0===s.noPan)return;u.set(e.clientX,e.clientY),h.subVectors(u,c),s.pan(h.x,h.y),c.copy(u)}b!==R.NONE&&s.update()}}function L(){!1!==s.enabled&&(document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",L,!1),document.removeEventListener("mouseout",L,!1),s.dispatchEvent(S),b=R.NONE)}function N(e){if(!1!==s.enabled&&!0!==s.noZoom&&b===R.NONE){e.preventDefault(),e.stopPropagation();var t=0;null!=e.wheelDelta?t=e.wheelDelta:null!=e.detail&&(t=-e.detail),t>0?s.dollyOut():t<0&&s.dollyIn(),s.update(),s.dispatchEvent(I),s.dispatchEvent(S),s.zoomCallback&&s.zoomCallback()}}function V(e){if(!1!==s.enabled&&!0!==s.noKeys&&!0!==s.noPan)switch(e.keyCode){case s.keys.UP:s.pan(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:s.pan(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:s.pan(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:s.pan(-s.keyPanSpeed,0),s.update()}}function k(e){if(!1!==s.enabled){var t=e.touches.length;switch(s.mouseButtons.PAN==THREE.MOUSE.LEFT&&(t=3),t){case 4:if(!0===s.noRotate)return;b=R.TOUCH_ROTATE,r.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===s.noZoom)return;b=R.TOUCH_DOLLY;var n=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(n*n+a*a);d.set(0,i);break;case 3:if(!0===s.noPan)return;b=R.TOUCH_PAN,c.set(e.touches[0].pageX,e.touches[0].pageY);break;default:b=R.NONE}b!==R.NONE&&s.dispatchEvent(I)}}function B(e){if(!1!==s.enabled){var t=s.domElement===document?s.domElement.body:s.domElement,n=e.touches.length;switch(s.mouseButtons.PAN==THREE.MOUSE.LEFT&&(n=3),n){case 4:if(!0===s.noRotate)return;if(b!==R.TOUCH_ROTATE)return;e.preventDefault(),e.stopPropagation(),o.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(o,r),s.rotateLeft(2*Math.PI*l.x/t.clientWidth*s.rotateSpeed),s.rotateUp(2*Math.PI*l.y/t.clientHeight*s.rotateSpeed),r.copy(o),s.update();break;case 2:if(!0===s.noZoom)return;if(b!==R.TOUCH_DOLLY)return;e.preventDefault(),e.stopPropagation();var a=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,p=Math.sqrt(a*a+i*i);E.set(0,p),f.subVectors(E,d),f.y>0?s.dollyOut():f.y<0&&s.dollyIn(),d.copy(E),s.update();break;case 3:if(!0===s.noPan)return;if(b!==R.TOUCH_PAN)return;e.preventDefault(),e.stopPropagation(),u.set(e.touches[0].pageX,e.touches[0].pageY),h.subVectors(u,c),s.pan(h.x,h.y),c.copy(u),s.update();break;default:b=R.NONE}}}function _(){!1!==s.enabled&&(s.dispatchEvent(S),b=R.NONE)}function j(e){e.preventDefault()}this.rotateLeft=function(e){null==e&&(e=z()),v-=e},this.rotateUp=function(e){null==e&&(e=z()),g-=e},this.panLeft=function(e){var t=this.object.matrix.elements;p.set(t[0],t[1],t[2]),p.multiplyScalar(-e),y.add(p)},this.panUp=function(e){var t=this.object.matrix.elements;p.set(t[4],t[5],t[6]),p.multiplyScalar(e),y.add(p)},this.pan=function(e,t){var n=s.domElement===document?s.domElement.body:s.domElement;if(s.object instanceof THREE.PerspectiveCamera){var a=s.object.position.clone().sub(s.target).length();a*=Math.tan(s.object.fov/2*Math.PI/180),s.panLeft(2*e*a/n.clientHeight),s.panUp(2*t*a/n.clientHeight)}else s.object instanceof THREE.OrthographicCamera?(s.panLeft(e*(s.object.right-s.object.left)/n.clientWidth),s.panUp(t*(s.object.top-s.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){null==e&&(e=O()),s.object instanceof THREE.PerspectiveCamera?T/=e:s.object instanceof THREE.OrthographicCamera?(s.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),s.object.updateProjectionMatrix(),s.dispatchEvent(w)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(e){null==e&&(e=O()),s.object instanceof THREE.PerspectiveCamera?T*=e:s.object instanceof THREE.OrthographicCamera?(s.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),s.object.updateProjectionMatrix(),s.dispatchEvent(w)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var e=this.object.position;m.copy(e).sub(this.target),m.applyQuaternion(P),n=Math.atan2(m.x,m.z),a=Math.atan2(Math.sqrt(m.x*m.x+m.z*m.z),m.y),this.autoRotate&&b===R.NONE&&this.rotateLeft(z()),n+=v,a+=g,n=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,n)),a=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,a)),a=Math.max(i,Math.min(Math.PI-i,a));var t=m.length()*T;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(y),m.x=t*Math.sin(a)*Math.sin(n),m.y=t*Math.cos(a),m.z=t*Math.sin(a)*Math.cos(n),m.applyQuaternion(H),e.copy(this.target).add(m),this.object.lookAt(this.target),v=0,g=0,T=1,y.set(0,0,0),(M.distanceToSquared(this.object.position)>i||8*(1-x.dot(this.object.quaternion))>i)&&(this.dispatchEvent(w),M.copy(this.object.position),x.copy(this.object.quaternion))},this.reset=function(){b=R.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(w),this.update()},this.getPolarAngle=function(){return a},this.getAzimuthalAngle=function(){return n},this.dispose=function(){this.domElement.removeEventListener("contextmenu",j,!1),this.domElement.removeEventListener("mousedown",A,!1),this.domElement.removeEventListener("mousewheel",N,!1),this.domElement.removeEventListener("DOMMouseScroll",N,!1),this.domElement.removeEventListener("touchstart",k,!1),this.domElement.removeEventListener("touchend",_,!1),this.domElement.removeEventListener("touchmove",B,!1),window.removeEventListener("keydown",V,!1)},this.domElement.addEventListener("contextmenu",j,!1),this.domElement.addEventListener("mousedown",A,!1),this.domElement.addEventListener("mousewheel",N,!1),this.domElement.addEventListener("DOMMouseScroll",N,!1),this.domElement.addEventListener("touchstart",k,!1),this.domElement.addEventListener("touchend",_,!1),this.domElement.addEventListener("touchmove",B,!1),window.addEventListener("keydown",V,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,THREE.CSS3DObject=function(e){THREE.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",(function(e){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)}))},THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype),THREE.CSS3DObject.prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(e){THREE.CSS3DObject.call(this,e)},THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype),THREE.CSS3DSprite.prototype.constructor=THREE.CSS3DSprite,THREE.CSS3DRenderer=function(){var e,t,n,a;console.log("THREE.CSS3DRenderer",THREE.REVISION);var s=new THREE.Matrix4,i={camera:{fov:0,style:""},objects:{}},r=document.createElement("div");r.style.overflow="hidden",r.style.WebkitTransformStyle="preserve-3d",r.style.MozTransformStyle="preserve-3d",r.style.oTransformStyle="preserve-3d",r.style.transformStyle="preserve-3d",this.domElement=r;var o=document.createElement("div");o.style.WebkitTransformStyle="preserve-3d",o.style.MozTransformStyle="preserve-3d",o.style.oTransformStyle="preserve-3d",o.style.transformStyle="preserve-3d",r.appendChild(o),this.setClearColor=function(){},this.getSize=function(){return{width:e,height:t}},this.setSize=function(s,i){n=(e=s)/2,a=(t=i)/2,r.style.width=s+"px",r.style.height=i+"px",o.style.width=s+"px",o.style.height=i+"px"};var l=function(e){return Math.abs(e)<Number.EPSILON?0:e},c=function(e){var t=e.elements;return"matrix3d("+l(t[0])+","+l(-t[1])+","+l(t[2])+","+l(t[3])+","+l(t[4])+","+l(-t[5])+","+l(t[6])+","+l(t[7])+","+l(t[8])+","+l(-t[9])+","+l(t[10])+","+l(t[11])+","+l(t[12])+","+l(-t[13])+","+l(t[14])+","+l(t[15])+")"},u=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+l(t[0])+","+l(t[1])+","+l(t[2])+","+l(t[3])+","+l(-t[4])+","+l(-t[5])+","+l(-t[6])+","+l(-t[7])+","+l(t[8])+","+l(t[9])+","+l(t[10])+","+l(t[11])+","+l(t[12])+","+l(t[13])+","+l(t[14])+","+l(t[15])+")"},h=function(e,t){if(e instanceof THREE.CSS3DObject){var n;e instanceof THREE.CSS3DSprite?(s.copy(t.matrixWorldInverse),s.transpose(),s.copyPosition(e.matrixWorld),s.scale(e.scale),s.elements[3]=0,s.elements[7]=0,s.elements[11]=0,s.elements[15]=1,n=u(s)):n=u(e.matrixWorld);var a=e.element,r=i.objects[e.id];void 0!==r&&r===n||(a.style.WebkitTransform=n,a.style.MozTransform=n,a.style.oTransform=n,a.style.transform=n,i.objects[e.id]=n),a.parentNode!==o&&o.appendChild(a)}for(var l=0,c=e.children.length;l<c;l++)h(e.children[l],t)};this.render=function(e,s){var l=.5/Math.tan(THREE.Math.degToRad(.5*s.fov))*t;i.camera.fov!==l&&(r.style.WebkitPerspective=l+"px",r.style.MozPerspective=l+"px",r.style.oPerspective=l+"px",r.style.perspective=l+"px",i.camera.fov=l),e.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),s.matrixWorldInverse.getInverse(s.matrixWorld);var u="translate3d(0,0,"+l+"px)"+c(s.matrixWorldInverse)+" translate3d("+n+"px,"+a+"px, 0)";i.camera.style!==u&&(o.style.WebkitTransform=u,o.style.MozTransform=u,o.style.oTransform=u,o.style.transform=u,i.camera.style=u),h(e,s)}};